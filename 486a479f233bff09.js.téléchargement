(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,291967,e=>{"use strict";function t(e,r,{checkForDefaultPrevented:n=!0}={}){return function(t){if(e?.(t),!1===n||!t.defaultPrevented)return r?.(t)}}"undefined"!=typeof window&&window.document&&window.document.createElement,e.s(["composeEventHandlers",()=>t])},19434,e=>{"use strict";var t=e.i(266431);function r(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function n(...e){return t=>{let n=!1,i=e.map(e=>{let i=r(e,t);return n||"function"!=typeof i||(n=!0),i});if(n)return()=>{for(let t=0;t<i.length;t++){let n=i[t];"function"==typeof n?n():r(e[t],null)}}}}function i(...e){return t.useCallback(n(...e),e)}e.s(["composeRefs",()=>n,"useComposedRefs",()=>i])},697189,e=>{"use strict";var t=e.i(266431),r=e.i(50897);function n(e,n){let i=t.createContext(n),s=e=>{let{children:n,...s}=e,o=t.useMemo(()=>s,Object.values(s));return(0,r.jsx)(i.Provider,{value:o,children:n})};return s.displayName=e+"Provider",[s,function(r){let s=t.useContext(i);if(s)return s;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${e}\``)}]}function i(e,n=[]){let s=[],o=()=>{let r=s.map(e=>t.createContext(e));return function(n){let i=n?.[e]||r;return t.useMemo(()=>({[`__scope${e}`]:{...n,[e]:i}}),[n,i])}};return o.scopeName=e,[function(n,i){let o=t.createContext(i),a=s.length;s=[...s,i];let l=n=>{let{scope:i,children:s,...l}=n,u=i?.[e]?.[a]||o,c=t.useMemo(()=>l,Object.values(l));return(0,r.jsx)(u.Provider,{value:c,children:s})};return l.displayName=n+"Provider",[l,function(r,s){let l=s?.[e]?.[a]||o,u=t.useContext(l);if(u)return u;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${n}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=n.reduce((t,{useScope:r,scopeName:n})=>{let i=r(e)[`__scope${n}`];return{...t,...i}},{});return t.useMemo(()=>({[`__scope${r.scopeName}`]:i}),[i])}};return n.scopeName=r.scopeName,n}(o,...n)]}e.s(["createContext",()=>n,"createContextScope",()=>i])},278943,671525,371203,506033,e=>{"use strict";var t,r=e.i(266431),n=e.i(291967),i=e.i(874511),s=e.i(19434),o=e.i(50897);function a(e){var t;let n,i=(t=e,(n=r.forwardRef((e,t)=>{let{children:n,...i}=e;if(r.isValidElement(n)){var o;let e,a,l=(o=n,(a=(e=Object.getOwnPropertyDescriptor(o.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.ref:(a=(e=Object.getOwnPropertyDescriptor(o,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?o.props.ref:o.props.ref||o.ref),u=function(e,t){let r={...t};for(let n in t){let i=e[n],s=t[n];/^on[A-Z]/.test(n)?i&&s?r[n]=(...e)=>{let t=s(...e);return i(...e),t}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(i,n.props);return n.type!==r.Fragment&&(u.ref=t?(0,s.composeRefs)(t,l):l),r.cloneElement(n,u)}return r.Children.count(n)>1?r.Children.only(null):null})).displayName=`${t}.SlotClone`,n),a=r.forwardRef((e,t)=>{let{children:n,...s}=e,a=r.Children.toArray(n),l=a.find(c);if(l){let e=l.props.children,n=a.map(t=>t!==l?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,o.jsx)(i,{...s,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,n):null})}return(0,o.jsx)(i,{...s,ref:t,children:n})});return a.displayName=`${e}.Slot`,a}var l=Symbol("radix.slottable");function u(e){let t=({children:e})=>(0,o.jsx)(o.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=l,t}function c(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}e.s(["createSlot",()=>a,"createSlottable",()=>u],671525);var d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let n=a(`Primitive.${t}`),i=r.forwardRef((e,r)=>{let{asChild:i,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(i?n:t,{...s,ref:r})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function h(e,t){e&&i.flushSync(()=>e.dispatchEvent(t))}function f(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...e)=>t.current?.(...e),[])}e.s(["Primitive",()=>d,"dispatchDiscreteCustomEvent",()=>h],371203),e.s(["useCallbackRef",()=>f],506033);var p="dismissableLayer.update",g=r.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),m=r.forwardRef((e,i)=>{let{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:h,onDismiss:m,...b}=e,w=r.useContext(g),[x,S]=r.useState(null),k=x?.ownerDocument??globalThis?.document,[,C]=r.useState({}),E=(0,s.useComposedRefs)(i,e=>S(e)),R=Array.from(w.layers),[T]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),A=R.indexOf(T),O=x?R.indexOf(x):-1,M=w.layersWithOutsidePointerEventsDisabled.size>0,I=O>=A,q=function(e,t=globalThis?.document){let n=f(e),i=r.useRef(!1),s=r.useRef(()=>{});return r.useEffect(()=>{let e=e=>{if(e.target&&!i.current){let r=function(){v("dismissableLayer.pointerDownOutside",n,i,{discrete:!0})},i={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",s.current),s.current=r,t.addEventListener("click",s.current,{once:!0})):r()}else t.removeEventListener("click",s.current);i.current=!1},r=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(r),t.removeEventListener("pointerdown",e),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>i.current=!0}}(e=>{let t=e.target,r=[...w.branches].some(e=>e.contains(t));I&&!r&&(u?.(e),h?.(e),e.defaultPrevented||m?.())},k),P=function(e,t=globalThis?.document){let n=f(e),i=r.useRef(!1);return r.useEffect(()=>{let e=e=>{e.target&&!i.current&&v("dismissableLayer.focusOutside",n,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}(e=>{let t=e.target;![...w.branches].some(e=>e.contains(t))&&(c?.(e),h?.(e),e.defaultPrevented||m?.())},k);return!function(e,t=globalThis?.document){let n=f(e);r.useEffect(()=>{let e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{O===w.layers.size-1&&(l?.(e),!e.defaultPrevented&&m&&(e.preventDefault(),m()))},k),r.useEffect(()=>{if(x)return a&&(0===w.layersWithOutsidePointerEventsDisabled.size&&(t=k.body.style.pointerEvents,k.body.style.pointerEvents="none"),w.layersWithOutsidePointerEventsDisabled.add(x)),w.layers.add(x),y(),()=>{a&&1===w.layersWithOutsidePointerEventsDisabled.size&&(k.body.style.pointerEvents=t)}},[x,k,a,w]),r.useEffect(()=>()=>{x&&(w.layers.delete(x),w.layersWithOutsidePointerEventsDisabled.delete(x),y())},[x,w]),r.useEffect(()=>{let e=()=>C({});return document.addEventListener(p,e),()=>document.removeEventListener(p,e)},[]),(0,o.jsx)(d.div,{...b,ref:E,style:{pointerEvents:M?I?"auto":"none":void 0,...e.style},onFocusCapture:(0,n.composeEventHandlers)(e.onFocusCapture,P.onFocusCapture),onBlurCapture:(0,n.composeEventHandlers)(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:(0,n.composeEventHandlers)(e.onPointerDownCapture,q.onPointerDownCapture)})});function y(){let e=new CustomEvent(p);document.dispatchEvent(e)}function v(e,t,r,{discrete:n}){let i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?h(i,s):i.dispatchEvent(s)}m.displayName="DismissableLayer",r.forwardRef((e,t)=>{let n=r.useContext(g),i=r.useRef(null),a=(0,s.useComposedRefs)(t,i);return r.useEffect(()=>{let e=i.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),(0,o.jsx)(d.div,{...e,ref:a})}).displayName="DismissableLayerBranch",e.s(["DismissableLayer",()=>m],278943)},891720,e=>{"use strict";var t=e.i(266431),r=globalThis?.document?t.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>r])},529546,742262,726379,253329,303624,e=>{"use strict";var t=e.i(266431),r=e.i(891720),n=t[" useId ".trim().toString()]||(()=>void 0),i=0;function s(e){let[s,o]=t.useState(n());return(0,r.useLayoutEffect)(()=>{e||o(e=>e??String(i++))},[e]),e||(s?`radix-${s}`:"")}e.s(["useId",()=>s],529546);let o=["top","right","bottom","left"],a=Math.min,l=Math.max,u=Math.round,c=Math.floor,d=e=>({x:e,y:e}),h={left:"right",right:"left",bottom:"top",top:"bottom"},f={start:"end",end:"start"};function p(e,t){return"function"==typeof e?e(t):e}function g(e){return e.split("-")[0]}function m(e){return e.split("-")[1]}function y(e){return"x"===e?"y":"x"}function v(e){return"y"===e?"height":"width"}let b=new Set(["top","bottom"]);function w(e){return b.has(g(e))?"y":"x"}function x(e){return e.replace(/start|end/g,e=>f[e])}let S=["left","right"],k=["right","left"],C=["top","bottom"],E=["bottom","top"];function R(e){return e.replace(/left|right|bottom|top/g,e=>h[e])}function T(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function A(e){let{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function O(e,t,r){let n,{reference:i,floating:s}=e,o=w(t),a=y(w(t)),l=v(a),u=g(t),c="y"===o,d=i.x+i.width/2-s.width/2,h=i.y+i.height/2-s.height/2,f=i[l]/2-s[l]/2;switch(u){case"top":n={x:d,y:i.y-s.height};break;case"bottom":n={x:d,y:i.y+i.height};break;case"right":n={x:i.x+i.width,y:h};break;case"left":n={x:i.x-s.width,y:h};break;default:n={x:i.x,y:i.y}}switch(m(t)){case"start":n[a]-=f*(r&&c?-1:1);break;case"end":n[a]+=f*(r&&c?-1:1)}return n}let M=async(e,t,r)=>{let{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await (null==o.isRTL?void 0:o.isRTL(t)),u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=O(u,n,l),h=n,f={},p=0;for(let r=0;r<a.length;r++){let{name:s,fn:g}=a[r],{x:m,y:y,data:v,reset:b}=await g({x:c,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:u,platform:o,elements:{reference:e,floating:t}});c=null!=m?m:c,d=null!=y?y:d,f={...f,[s]:{...f[s],...v}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(h=b.placement),b.rects&&(u=!0===b.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),{x:c,y:d}=O(u,h,l)),r=-1)}return{x:c,y:d,placement:h,strategy:i,middlewareData:f}};async function I(e,t){var r;void 0===t&&(t={});let{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=p(t,e),g=T(f),m=a[h?"floating"===d?"reference":"floating":d],y=A(await s.getClippingRect({element:null==(r=await (null==s.isElement?void 0:s.isElement(m)))||r?m:m.contextElement||await (null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v="floating"===d?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await (null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),w=await (null==s.isElement?void 0:s.isElement(b))&&await (null==s.getScale?void 0:s.getScale(b))||{x:1,y:1},x=A(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:l}):v);return{top:(y.top-x.top+g.top)/w.y,bottom:(x.bottom-y.bottom+g.bottom)/w.y,left:(y.left-x.left+g.left)/w.x,right:(x.right-y.right+g.right)/w.x}}function q(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function P(e){return o.some(t=>e[t]>=0)}let L=new Set(["left","top"]);async function $(e,t){let{placement:r,platform:n,elements:i}=e,s=await (null==n.isRTL?void 0:n.isRTL(i.floating)),o=g(r),a=m(r),l="y"===w(r),u=L.has(o)?-1:1,c=s&&l?-1:1,d=p(t,e),{mainAxis:h,crossAxis:f,alignmentAxis:y}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof y&&(f="end"===a?-1*y:y),l?{x:f*c,y:h*u}:{x:h*u,y:f*c}}function j(){return"undefined"!=typeof window}function N(e){return _(e)?(e.nodeName||"").toLowerCase():"#document"}function D(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function V(e){var t;return null==(t=(_(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function _(e){return!!j()&&(e instanceof Node||e instanceof D(e).Node)}function F(e){return!!j()&&(e instanceof Element||e instanceof D(e).Element)}function B(e){return!!j()&&(e instanceof HTMLElement||e instanceof D(e).HTMLElement)}function Q(e){return!!j()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof D(e).ShadowRoot)}let U=new Set(["inline","contents"]);function W(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=er(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!U.has(i)}let z=new Set(["table","td","th"]),H=[":popover-open",":modal"];function Y(e){return H.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let J=["transform","translate","scale","rotate","perspective"],K=["transform","translate","scale","rotate","perspective","filter"],X=["paint","layout","strict","content"];function G(e){let t=Z(),r=F(e)?er(e):e;return J.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||K.some(e=>(r.willChange||"").includes(e))||X.some(e=>(r.contain||"").includes(e))}function Z(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let ee=new Set(["html","body","#document"]);function et(e){return ee.has(N(e))}function er(e){return D(e).getComputedStyle(e)}function en(e){return F(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ei(e){if("html"===N(e))return e;let t=e.assignedSlot||e.parentNode||Q(e)&&e.host||V(e);return Q(t)?t.host:t}function es(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let i=function e(t){let r=ei(t);return et(r)?t.ownerDocument?t.ownerDocument.body:t.body:B(r)&&W(r)?r:e(r)}(e),s=i===(null==(n=e.ownerDocument)?void 0:n.body),o=D(i);if(s){let e=eo(o);return t.concat(o,o.visualViewport||[],W(i)?i:[],e&&r?es(e):[])}return t.concat(i,es(i,[],r))}function eo(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ea(e){let t=er(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=B(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=u(r)!==s||u(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function el(e){return F(e)?e:e.contextElement}function eu(e){let t=el(e);if(!B(t))return d(1);let r=t.getBoundingClientRect(),{width:n,height:i,$:s}=ea(t),o=(s?u(r.width):r.width)/n,a=(s?u(r.height):r.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}let ec=d(0);function ed(e){let t=D(e);return Z()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ec}function eh(e,t,r,n){var i;void 0===t&&(t=!1),void 0===r&&(r=!1);let s=e.getBoundingClientRect(),o=el(e),a=d(1);t&&(n?F(n)&&(a=eu(n)):a=eu(e));let l=(void 0===(i=r)&&(i=!1),n&&(!i||n===D(o))&&i)?ed(o):d(0),u=(s.left+l.x)/a.x,c=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(o){let e=D(o),t=n&&F(n)?D(n):n,r=e,i=eo(r);for(;i&&n&&t!==r;){let e=eu(i),t=i.getBoundingClientRect(),n=er(i),s=t.left+(i.clientLeft+parseFloat(n.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(n.paddingTop))*e.y;u*=e.x,c*=e.y,h*=e.x,f*=e.y,u+=s,c+=o,i=eo(r=D(i))}}return A({width:h,height:f,x:u,y:c})}function ef(e,t){let r=en(e).scrollLeft;return t?t.left+r:eh(V(e)).left+r}function ep(e,t,r){void 0===r&&(r=!1);let n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-(r?0:ef(e,n)),y:n.top+t.scrollTop}}let eg=new Set(["absolute","fixed"]);function em(e,t,r){var n;let i;if("viewport"===t)i=function(e,t){let r=D(e),n=V(e),i=r.visualViewport,s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;let e=Z();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}(e,r);else if("document"===t){let t,r,s,o,a,u,c;n=V(e),t=V(n),r=en(n),s=n.ownerDocument.body,o=l(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=l(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),u=-r.scrollLeft+ef(n),c=-r.scrollTop,"rtl"===er(s).direction&&(u+=l(t.clientWidth,s.clientWidth)-o),i={width:o,height:a,x:u,y:c}}else if(F(t)){let e,n,s,o,a,l;n=(e=eh(t,!0,"fixed"===r)).top+t.clientTop,s=e.left+t.clientLeft,o=B(t)?eu(t):d(1),a=t.clientWidth*o.x,l=t.clientHeight*o.y,i={width:a,height:l,x:s*o.x,y:n*o.y}}else{let r=ed(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return A(i)}function ey(e){return"static"===er(e).position}function ev(e,t){if(!B(e)||"fixed"===er(e).position)return null;if(t)return t(e);let r=e.offsetParent;return V(e)===r&&(r=r.ownerDocument.body),r}function eb(e,t){var r;let n=D(e);if(Y(e))return n;if(!B(e)){let t=ei(e);for(;t&&!et(t);){if(F(t)&&!ey(t))return t;t=ei(t)}return n}let i=ev(e,t);for(;i&&(r=i,z.has(N(r)))&&ey(i);)i=ev(i,t);return i&&et(i)&&ey(i)&&!G(i)?n:i||function(e){let t=ei(e);for(;B(t)&&!et(t);){if(G(t))return t;if(Y(t))break;t=ei(t)}return null}(e)||n}let ew=async function(e){let t=this.getOffsetParent||eb,r=this.getDimensions,n=await r(e.floating);return{reference:function(e,t,r){let n=B(t),i=V(t),s="fixed"===r,o=eh(e,!0,s,t),a={scrollLeft:0,scrollTop:0},l=d(0);if(n||!n&&!s)if(("body"!==N(t)||W(i))&&(a=en(t)),n){let e=eh(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=ef(i));s&&!n&&i&&(l.x=ef(i));let u=!i||n||s?d(0):ep(i,a);return{x:o.left+a.scrollLeft-l.x-u.x,y:o.top+a.scrollTop-l.y-u.y,width:o.width,height:o.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},ex={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e,s="fixed"===i,o=V(n),a=!!t&&Y(t.floating);if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},u=d(1),c=d(0),h=B(n);if((h||!h&&!s)&&(("body"!==N(n)||W(o))&&(l=en(n)),B(n))){let e=eh(n);u=eu(n),c.x=e.x+n.clientLeft,c.y=e.y+n.clientTop}let f=!o||h||s?d(0):ep(o,l,!0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:r.y*u.y-l.scrollTop*u.y+c.y+f.y}},getDocumentElement:V,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e,s=[..."clippingAncestors"===r?Y(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let n=es(e,[],!1).filter(e=>F(e)&&"body"!==N(e)),i=null,s="fixed"===er(e).position,o=s?ei(e):e;for(;F(o)&&!et(o);){let t=er(o),r=G(o);r||"fixed"!==t.position||(i=null),(s?!r&&!i:!r&&"static"===t.position&&!!i&&eg.has(i.position)||W(o)&&!r&&function e(t,r){let n=ei(t);return!(n===r||!F(n)||et(n))&&("fixed"===er(n).position||e(n,r))}(e,o))?n=n.filter(e=>e!==o):i=t,o=ei(o)}return t.set(e,n),n}(t,this._c):[].concat(r),n],o=s[0],u=s.reduce((e,r)=>{let n=em(t,r,i);return e.top=l(n.top,e.top),e.right=a(n.right,e.right),e.bottom=a(n.bottom,e.bottom),e.left=l(n.left,e.left),e},em(t,o,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},getOffsetParent:eb,getElementRects:ew,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=ea(e);return{width:t,height:r}},getScale:eu,isElement:F,isRTL:function(e){return"rtl"===er(e).direction}};function eS(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let ek=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:i,rects:s,platform:o,elements:u,middlewareData:c}=t,{element:d,padding:h=0}=p(e,t)||{};if(null==d)return{};let f=T(h),g={x:r,y:n},b=y(w(i)),x=v(b),S=await o.getDimensions(d),k="y"===b,C=k?"clientHeight":"clientWidth",E=s.reference[x]+s.reference[b]-g[b]-s.floating[x],R=g[b]-s.reference[b],A=await (null==o.getOffsetParent?void 0:o.getOffsetParent(d)),O=A?A[C]:0;O&&await (null==o.isElement?void 0:o.isElement(A))||(O=u.floating[C]||s.floating[x]);let M=O/2-S[x]/2-1,I=a(f[k?"top":"left"],M),q=a(f[k?"bottom":"right"],M),P=O-S[x]-q,L=O/2-S[x]/2+(E/2-R/2),$=l(I,a(L,P)),j=!c.arrow&&null!=m(i)&&L!==$&&s.reference[x]/2-(L<I?I:q)-S[x]/2<0,N=j?L<I?L-I:L-P:0;return{[b]:g[b]+N,data:{[b]:$,centerOffset:L-$-N,...j&&{alignmentOffset:N}},reset:j}}});var eC=e.i(874511),eE="undefined"!=typeof document?t.useLayoutEffect:function(){};function eR(e,t){let r,n,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!eR(e[n],t[n]))return!1;return!0}if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!=n--;){let r=i[n];if(("_owner"!==r||!e.$$typeof)&&!eR(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function eT(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function eA(e,t){let r=eT(e);return Math.round(t*r)/r}function eO(e){let r=t.useRef(e);return eE(()=>{r.current=e}),r}var eM=e.i(371203),eI=e.i(50897),eq=t.forwardRef((e,t)=>{let{children:r,width:n=10,height:i=5,...s}=e;return(0,eI.jsx)(eM.Primitive.svg,{...s,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,eI.jsx)("polygon",{points:"0,0 30,0 15,10"})})});eq.displayName="Arrow";var eP=e.i(19434),eL=e.i(697189),e$=e.i(506033);function ej(e){let[n,i]=t.useState(void 0);return(0,r.useLayoutEffect)(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,n;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,n=t.blockSize}else r=e.offsetWidth,n=e.offsetHeight;i({width:r,height:n})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}i(void 0)},[e]),n}e.s(["useSize",()=>ej],742262);var eN="Popper",[eD,eV]=(0,eL.createContextScope)(eN),[e_,eF]=eD(eN),eB=e=>{let{__scopePopper:r,children:n}=e,[i,s]=t.useState(null);return(0,eI.jsx)(e_,{scope:r,anchor:i,onAnchorChange:s,children:n})};eB.displayName=eN;var eQ="PopperAnchor",eU=t.forwardRef((e,r)=>{let{__scopePopper:n,virtualRef:i,...s}=e,o=eF(eQ,n),a=t.useRef(null),l=(0,eP.useComposedRefs)(r,a),u=t.useRef(null);return t.useEffect(()=>{let e=u.current;u.current=i?.current||a.current,e!==u.current&&o.onAnchorChange(u.current)}),i?null:(0,eI.jsx)(eM.Primitive.div,{...s,ref:l})});eU.displayName=eQ;var eW="PopperContent",[ez,eH]=eD(eW),eY=t.forwardRef((e,n)=>{var i,s,o,u,d,h,f,b,T,A,O,j,N,D,_,F,B,Q,U,W,z;let{__scopePopper:H,side:Y="bottom",sideOffset:J=0,align:K="center",alignOffset:X=0,arrowPadding:G=0,avoidCollisions:Z=!0,collisionBoundary:ee=[],collisionPadding:et=0,sticky:er="partial",hideWhenDetached:en=!1,updatePositionStrategy:ei="optimized",onPlaced:eo,...ea}=e,eu=eF(eW,H),[ec,ed]=t.useState(null),ef=(0,eP.useComposedRefs)(n,e=>ed(e)),[ep,eg]=t.useState(null),em=ej(ep),ey=em?.width??0,ev=em?.height??0,eb="number"==typeof et?et:{top:0,right:0,bottom:0,left:0,...et},ew=Array.isArray(ee)?ee:[ee],eq=ew.length>0,eL={padding:eb,boundary:ew.filter(eG),altBoundary:eq},{refs:eN,floatingStyles:eD,placement:eV,isPositioned:e_,middlewareData:eB}=function(e){void 0===e&&(e={});let{placement:r="bottom",strategy:n="absolute",middleware:i=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:u,open:c}=e,[d,h]=t.useState({x:0,y:0,strategy:n,placement:r,middlewareData:{},isPositioned:!1}),[f,p]=t.useState(i);eR(f,i)||p(i);let[g,m]=t.useState(null),[y,v]=t.useState(null),b=t.useCallback(e=>{e!==k.current&&(k.current=e,m(e))},[]),w=t.useCallback(e=>{e!==C.current&&(C.current=e,v(e))},[]),x=o||g,S=a||y,k=t.useRef(null),C=t.useRef(null),E=t.useRef(d),R=null!=u,T=eO(u),A=eO(s),O=eO(c),I=t.useCallback(()=>{var e,t;let i,s,o;if(!k.current||!C.current)return;let a={placement:r,strategy:n,middleware:f};A.current&&(a.platform=A.current),(e=k.current,t=C.current,i=new Map,o={...(s={platform:ex,...a}).platform,_c:i},M(e,t,{...s,platform:o})).then(e=>{let t={...e,isPositioned:!1!==O.current};q.current&&!eR(E.current,t)&&(E.current=t,eC.flushSync(()=>{h(t)}))})},[f,r,n,A,O]);eE(()=>{!1===c&&E.current.isPositioned&&(E.current.isPositioned=!1,h(e=>({...e,isPositioned:!1})))},[c]);let q=t.useRef(!1);eE(()=>(q.current=!0,()=>{q.current=!1}),[]),eE(()=>{if(x&&(k.current=x),S&&(C.current=S),x&&S){if(T.current)return T.current(x,S,I);I()}},[x,S,I,T,R]);let P=t.useMemo(()=>({reference:k,floating:C,setReference:b,setFloating:w}),[b,w]),L=t.useMemo(()=>({reference:x,floating:S}),[x,S]),$=t.useMemo(()=>{let e={position:n,left:0,top:0};if(!L.floating)return e;let t=eA(L.floating,d.x),r=eA(L.floating,d.y);return l?{...e,transform:"translate("+t+"px, "+r+"px)",...eT(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,l,L.floating,d.x,d.y]);return t.useMemo(()=>({...d,update:I,refs:P,elements:L,floatingStyles:$}),[d,I,P,L,$])}({strategy:"fixed",placement:Y+("center"!==K?"-"+K:""),whileElementsMounted:(...e)=>(function(e,t,r,n){let i;void 0===n&&(n={});let{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:u="function"==typeof ResizeObserver,layoutShift:d="function"==typeof IntersectionObserver,animationFrame:h=!1}=n,f=el(e),p=s||o?[...f?es(f):[],...es(t)]:[];p.forEach(e=>{s&&e.addEventListener("scroll",r,{passive:!0}),o&&e.addEventListener("resize",r)});let g=f&&d?function(e,t){let r,n=null,i=V(e);function s(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return!function o(u,d){void 0===u&&(u=!1),void 0===d&&(d=1),s();let h=e.getBoundingClientRect(),{left:f,top:p,width:g,height:m}=h;if(u||t(),!g||!m)return;let y={rootMargin:-c(p)+"px "+-c(i.clientWidth-(f+g))+"px "+-c(i.clientHeight-(p+m))+"px "+-c(f)+"px",threshold:l(0,a(1,d))||1},v=!0;function b(t){let n=t[0].intersectionRatio;if(n!==d){if(!v)return o();n?o(!1,n):r=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==n||eS(h,e.getBoundingClientRect())||o(),v=!1}try{n=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch(e){n=new IntersectionObserver(b,y)}n.observe(e)}(!0),s}(f,r):null,m=-1,y=null;u&&(y=new ResizeObserver(e=>{let[n]=e;n&&n.target===f&&y&&(y.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=y)||e.observe(t)})),r()}),f&&!h&&y.observe(f),y.observe(t));let v=h?eh(e):null;return h&&function t(){let n=eh(e);v&&!eS(v,n)&&r(),v=n,i=requestAnimationFrame(t)}(),r(),()=>{var e;p.forEach(e=>{s&&e.removeEventListener("scroll",r),o&&e.removeEventListener("resize",r)}),null==g||g(),null==(e=y)||e.disconnect(),y=null,h&&cancelAnimationFrame(i)}})(...e,{animationFrame:"always"===ei}),elements:{reference:eu.anchor},middleware:[{...{name:"offset",options:o=i={mainAxis:J+ev,alignmentAxis:X},async fn(e){var t,r;let{x:n,y:i,placement:s,middlewareData:a}=e,l=await $(e,o);return s===(null==(t=a.offset)?void 0:t.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:n+l.x,y:i+l.y,data:{...l,placement:s}}}},options:[i,s]},Z&&{...{name:"shift",options:T=f={mainAxis:!0,crossAxis:!1,limiter:"partial"===er?{...(void 0===(h=u)&&(h={}),{options:h,fn(e){let{x:t,y:r,placement:n,rects:i,middlewareData:s}=e,{offset:o=0,mainAxis:a=!0,crossAxis:l=!0}=p(h,e),u={x:t,y:r},c=w(n),d=y(c),f=u[d],m=u[c],v=p(o,e),b="number"==typeof v?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(a){let e="y"===d?"height":"width",t=i.reference[d]-i.floating[e]+b.mainAxis,r=i.reference[d]+i.reference[e]-b.mainAxis;f<t?f=t:f>r&&(f=r)}if(l){var x,S;let e="y"===d?"width":"height",t=L.has(g(n)),r=i.reference[c]-i.floating[e]+(t&&(null==(x=s.offset)?void 0:x[c])||0)+(t?0:b.crossAxis),o=i.reference[c]+i.reference[e]+(t?0:(null==(S=s.offset)?void 0:S[c])||0)-(t?b.crossAxis:0);m<r?m=r:m>o&&(m=o)}return{[d]:f,[c]:m}}}),options:[u,d]}:void 0,...eL},async fn(e){let{x:t,y:r,placement:n}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...u}=p(T,e),c={x:t,y:r},d=await I(e,u),h=w(g(n)),f=y(h),m=c[f],v=c[h];if(i){let e="y"===f?"top":"left",t="y"===f?"bottom":"right",r=m+d[e],n=m-d[t];m=l(r,a(m,n))}if(s){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",r=v+d[e],n=v-d[t];v=l(r,a(v,n))}let b=o.fn({...e,[f]:m,[h]:v});return{...b,data:{x:b.x-t,y:b.y-r,enabled:{[f]:i,[h]:s}}}}},options:[f,b]},Z&&{...{name:"flip",options:j=A={...eL},async fn(e){var t,r,n,i,s,o,a,l;let u,c,d,{placement:h,middlewareData:f,rects:b,initialPlacement:T,platform:A,elements:O}=e,{mainAxis:M=!0,crossAxis:q=!0,fallbackPlacements:P,fallbackStrategy:L="bestFit",fallbackAxisSideDirection:$="none",flipAlignment:N=!0,...D}=p(j,e);if(null!=(t=f.arrow)&&t.alignmentOffset)return{};let V=g(h),_=w(T),F=g(T)===T,B=await (null==A.isRTL?void 0:A.isRTL(O.floating)),Q=P||(F||!N?[R(T)]:(u=R(T),[x(T),u,x(u)])),U="none"!==$;!P&&U&&Q.push(...(c=m(T),d=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?k:S;return t?S:k;case"left":case"right":return t?C:E;default:return[]}}(g(T),"start"===$,B),c&&(d=d.map(e=>e+"-"+c),N&&(d=d.concat(d.map(x)))),d));let W=[T,...Q],z=await I(e,D),H=[],Y=(null==(r=f.flip)?void 0:r.overflows)||[];if(M&&H.push(z[V]),q){let e,t,r,n,i=(o=h,a=b,void 0===(l=B)&&(l=!1),e=m(o),r=v(t=y(w(o))),n="x"===t?e===(l?"end":"start")?"right":"left":"start"===e?"bottom":"top",a.reference[r]>a.floating[r]&&(n=R(n)),[n,R(n)]);H.push(z[i[0]],z[i[1]])}if(Y=[...Y,{placement:h,overflows:H}],!H.every(e=>e<=0)){let e=((null==(n=f.flip)?void 0:n.index)||0)+1,t=W[e];if(t&&("alignment"!==q||_===w(t)||Y.every(e=>w(e.placement)!==_||e.overflows[0]>0)))return{data:{index:e,overflows:Y},reset:{placement:t}};let r=null==(i=Y.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!r)switch(L){case"bestFit":{let e=null==(s=Y.filter(e=>{if(U){let t=w(e.placement);return t===_||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:s[0];e&&(r=e);break}case"initialPlacement":r=T}if(h!==r)return{reset:{placement:r}}}return{}}},options:[A,O]},{...{name:"size",options:_=N={...eL,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{let{width:i,height:s}=t.reference,o=e.floating.style;o.setProperty("--radix-popper-available-width",`${r}px`),o.setProperty("--radix-popper-available-height",`${n}px`),o.setProperty("--radix-popper-anchor-width",`${i}px`),o.setProperty("--radix-popper-anchor-height",`${s}px`)}},async fn(e){var t,r;let n,i,{placement:s,rects:o,platform:u,elements:c}=e,{apply:d=()=>{},...h}=p(_,e),f=await I(e,h),y=g(s),v=m(s),b="y"===w(s),{width:x,height:S}=o.floating;"top"===y||"bottom"===y?(n=y,i=v===(await (null==u.isRTL?void 0:u.isRTL(c.floating))?"start":"end")?"left":"right"):(i=y,n="end"===v?"top":"bottom");let k=S-f.top-f.bottom,C=x-f.left-f.right,E=a(S-f[n],k),R=a(x-f[i],C),T=!e.middlewareData.shift,A=E,O=R;if(null!=(t=e.middlewareData.shift)&&t.enabled.x&&(O=C),null!=(r=e.middlewareData.shift)&&r.enabled.y&&(A=k),T&&!v){let e=l(f.left,0),t=l(f.right,0),r=l(f.top,0),n=l(f.bottom,0);b?O=x-2*(0!==e||0!==t?e+t:l(f.left,f.right)):A=S-2*(0!==r||0!==n?r+n:l(f.top,f.bottom))}await d({...e,availableWidth:O,availableHeight:A});let M=await u.getDimensions(c.floating);return x!==M.width||S!==M.height?{reset:{rects:!0}}:{}}},options:[N,D]},ep&&{...{name:"arrow",options:Q=F={element:ep,padding:G},fn(e){let{element:t,padding:r}="function"==typeof Q?Q(e):Q;return t&&({}).hasOwnProperty.call(t,"current")?null!=t.current?ek({element:t.current,padding:r}).fn(e):{}:t?ek({element:t,padding:r}).fn(e):{}}},options:[F,B]},eZ({arrowWidth:ey,arrowHeight:ev}),en&&{...{name:"hide",options:z=U={strategy:"referenceHidden",...eL},async fn(e){let{rects:t}=e,{strategy:r="referenceHidden",...n}=p(z,e);switch(r){case"referenceHidden":{let r=q(await I(e,{...n,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:P(r)}}}case"escaped":{let r=q(await I(e,{...n,altBoundary:!0}),t.floating);return{data:{escapedOffsets:r,escaped:P(r)}}}default:return{}}}},options:[U,W]}]}),[eQ,eU]=e0(eV),eH=(0,e$.useCallbackRef)(eo);(0,r.useLayoutEffect)(()=>{e_&&eH?.()},[e_,eH]);let eY=eB.arrow?.x,eJ=eB.arrow?.y,eK=eB.arrow?.centerOffset!==0,[eX,e1]=t.useState();return(0,r.useLayoutEffect)(()=>{ec&&e1(window.getComputedStyle(ec).zIndex)},[ec]),(0,eI.jsx)("div",{ref:eN.setFloating,"data-radix-popper-content-wrapper":"",style:{...eD,transform:e_?eD.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:eX,"--radix-popper-transform-origin":[eB.transformOrigin?.x,eB.transformOrigin?.y].join(" "),...eB.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,eI.jsx)(ez,{scope:H,placedSide:eQ,onArrowChange:eg,arrowX:eY,arrowY:eJ,shouldHideArrow:eK,children:(0,eI.jsx)(eM.Primitive.div,{"data-side":eQ,"data-align":eU,...ea,ref:ef,style:{...ea.style,animation:e_?void 0:"none"}})})})});eY.displayName=eW;var eJ="PopperArrow",eK={top:"bottom",right:"left",bottom:"top",left:"right"},eX=t.forwardRef(function(e,t){let{__scopePopper:r,...n}=e,i=eH(eJ,r),s=eK[i.placedSide];return(0,eI.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,eI.jsx)(eq,{...n,ref:t,style:{...n.style,display:"block"}})})});function eG(e){return null!==e}eX.displayName=eJ;var eZ=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:n,middlewareData:i}=t,s=i.arrow?.centerOffset!==0,o=s?0:e.arrowWidth,a=s?0:e.arrowHeight,[l,u]=e0(r),c={start:"0%",center:"50%",end:"100%"}[u],d=(i.arrow?.x??0)+o/2,h=(i.arrow?.y??0)+a/2,f="",p="";return"bottom"===l?(f=s?c:`${d}px`,p=`${-a}px`):"top"===l?(f=s?c:`${d}px`,p=`${n.floating.height+a}px`):"right"===l?(f=`${-a}px`,p=s?c:`${h}px`):"left"===l&&(f=`${n.floating.width+a}px`,p=s?c:`${h}px`),{data:{x:f,y:p}}}});function e0(e){let[t,r="center"]=e.split("-");return[t,r]}e.s(["Anchor",()=>eU,"Arrow",()=>eX,"Content",()=>eY,"Root",()=>eB,"createPopperScope",()=>eV],726379);var e1=t.forwardRef((e,n)=>{let{container:i,...s}=e,[o,a]=t.useState(!1);(0,r.useLayoutEffect)(()=>a(!0),[]);let l=i||o&&globalThis?.document?.body;return l?eC.default.createPortal((0,eI.jsx)(eM.Primitive.div,{...s,ref:n}),l):null});e1.displayName="Portal",e.s(["Portal",()=>e1],253329);var e2=e=>{var n;let i,s,{present:o,children:a}=e,l=function(e){var n,i;let[s,o]=t.useState(),a=t.useRef(null),l=t.useRef(e),u=t.useRef("none"),[c,d]=(n=e?"mounted":"unmounted",i={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>i[e][t]??e,n));return t.useEffect(()=>{let e=e5(a.current);u.current="mounted"===c?e:"none"},[c]),(0,r.useLayoutEffect)(()=>{let t=a.current,r=l.current;if(r!==e){let n=u.current,i=e5(t);e?d("MOUNT"):"none"===i||t?.display==="none"?d("UNMOUNT"):r&&n!==i?d("ANIMATION_OUT"):d("UNMOUNT"),l.current=e}},[e,d]),(0,r.useLayoutEffect)(()=>{if(s){let e,t=s.ownerDocument.defaultView??window,r=r=>{let n=e5(a.current).includes(CSS.escape(r.animationName));if(r.target===s&&n&&(d("ANIMATION_END"),!l.current)){let r=s.style.animationFillMode;s.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=r)})}},n=e=>{e.target===s&&(u.current=e5(a.current))};return s.addEventListener("animationstart",n),s.addEventListener("animationcancel",r),s.addEventListener("animationend",r),()=>{t.clearTimeout(e),s.removeEventListener("animationstart",n),s.removeEventListener("animationcancel",r),s.removeEventListener("animationend",r)}}d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:t.useCallback(e=>{a.current=e?getComputedStyle(e):null,o(e)},[])}}(o),u="function"==typeof a?a({present:l.isPresent}):t.Children.only(a),c=(0,eP.useComposedRefs)(l.ref,(n=u,(s=(i=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?n.ref:(s=(i=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?n.props.ref:n.props.ref||n.ref));return"function"==typeof a||l.isPresent?t.cloneElement(u,{ref:c}):null};function e5(e){return e?.animationName||"none"}e2.displayName="Presence",e.s(["Presence",()=>e2],303624)},477105,e=>{"use strict";var t=e.i(266431),r=e.i(891720);t[" useEffectEvent ".trim().toString()],t[" useInsertionEffect ".trim().toString()];var n=t[" useInsertionEffect ".trim().toString()]||r.useLayoutEffect;function i({prop:e,defaultProp:r,onChange:i=()=>{},caller:s}){let[o,a,l]=function({defaultProp:e,onChange:r}){let[i,s]=t.useState(e),o=t.useRef(i),a=t.useRef(r);return n(()=>{a.current=r},[r]),t.useEffect(()=>{o.current!==i&&(a.current?.(i),o.current=i)},[i,o]),[i,s,a]}({defaultProp:r,onChange:i}),u=void 0!==e,c=u?e:o;{let r=t.useRef(void 0!==e);t.useEffect(()=>{let e=r.current;if(e!==u){let t=u?"controlled":"uncontrolled";console.warn(`${s} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}r.current=u},[u,s])}return[c,t.useCallback(t=>{if(u){let r="function"==typeof t?t(e):t;r!==e&&l.current?.(r)}else a(t)},[u,e,a,l])]}Symbol("RADIX:SYNC_STATE"),e.s(["useControllableState",()=>i],477105)},69035,212932,e=>{"use strict";var t=e.i(266431),r=e.i(291967),n=e.i(19434),i=e.i(697189),s=e.i(278943),o=e.i(529546),a=e.i(726379),l=e.i(253329),u=e.i(303624),c=e.i(371203),d=e.i(671525),h=e.i(477105),f=e.i(50897),p=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),g=t.forwardRef((e,t)=>(0,f.jsx)(c.Primitive.span,{...e,ref:t,style:{...p,...e.style}}));g.displayName="VisuallyHidden",e.s(["Root",()=>g,"VISUALLY_HIDDEN_STYLES",()=>p],212932);var[m,y]=(0,i.createContextScope)("Tooltip",[a.createPopperScope]),v=(0,a.createPopperScope)(),b="TooltipProvider",w="tooltip.open",[x,S]=m(b),k=e=>{let{__scopeTooltip:r,delayDuration:n=700,skipDelayDuration:i=300,disableHoverableContent:s=!1,children:o}=e,a=t.useRef(!0),l=t.useRef(!1),u=t.useRef(0);return t.useEffect(()=>{let e=u.current;return()=>window.clearTimeout(e)},[]),(0,f.jsx)(x,{scope:r,isOpenDelayedRef:a,delayDuration:n,onOpen:t.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:t.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,i)},[i]),isPointerInTransitRef:l,onPointerInTransitChange:t.useCallback(e=>{l.current=e},[]),disableHoverableContent:s,children:o})};k.displayName=b;var C="Tooltip",[E,R]=m(C),T=e=>{let{__scopeTooltip:r,children:n,open:i,defaultOpen:s,onOpenChange:l,disableHoverableContent:u,delayDuration:c}=e,d=S(C,e.__scopeTooltip),p=v(r),[g,m]=t.useState(null),y=(0,o.useId)(),b=t.useRef(0),x=u??d.disableHoverableContent,k=c??d.delayDuration,R=t.useRef(!1),[T,A]=(0,h.useControllableState)({prop:i,defaultProp:s??!1,onChange:e=>{e?(d.onOpen(),document.dispatchEvent(new CustomEvent(w))):d.onClose(),l?.(e)},caller:C}),O=t.useMemo(()=>T?R.current?"delayed-open":"instant-open":"closed",[T]),M=t.useCallback(()=>{window.clearTimeout(b.current),b.current=0,R.current=!1,A(!0)},[A]),I=t.useCallback(()=>{window.clearTimeout(b.current),b.current=0,A(!1)},[A]),q=t.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{R.current=!0,A(!0),b.current=0},k)},[k,A]);return t.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),(0,f.jsx)(a.Root,{...p,children:(0,f.jsx)(E,{scope:r,contentId:y,open:T,stateAttribute:O,trigger:g,onTriggerChange:m,onTriggerEnter:t.useCallback(()=>{d.isOpenDelayedRef.current?q():M()},[d.isOpenDelayedRef,q,M]),onTriggerLeave:t.useCallback(()=>{x?I():(window.clearTimeout(b.current),b.current=0)},[I,x]),onOpen:M,onClose:I,disableHoverableContent:x,children:n})})};T.displayName=C;var A="TooltipTrigger",O=t.forwardRef((e,i)=>{let{__scopeTooltip:s,...o}=e,l=R(A,s),u=S(A,s),d=v(s),h=t.useRef(null),p=(0,n.useComposedRefs)(i,h,l.onTriggerChange),g=t.useRef(!1),m=t.useRef(!1),y=t.useCallback(()=>g.current=!1,[]);return t.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),(0,f.jsx)(a.Anchor,{asChild:!0,...d,children:(0,f.jsx)(c.Primitive.button,{"aria-describedby":l.open?l.contentId:void 0,"data-state":l.stateAttribute,...o,ref:p,onPointerMove:(0,r.composeEventHandlers)(e.onPointerMove,e=>{"touch"!==e.pointerType&&(m.current||u.isPointerInTransitRef.current||(l.onTriggerEnter(),m.current=!0))}),onPointerLeave:(0,r.composeEventHandlers)(e.onPointerLeave,()=>{l.onTriggerLeave(),m.current=!1}),onPointerDown:(0,r.composeEventHandlers)(e.onPointerDown,()=>{l.open&&l.onClose(),g.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>{g.current||l.onOpen()}),onBlur:(0,r.composeEventHandlers)(e.onBlur,l.onClose),onClick:(0,r.composeEventHandlers)(e.onClick,l.onClose)})})});O.displayName=A;var M="TooltipPortal",[I,q]=m(M,{forceMount:void 0}),P=e=>{let{__scopeTooltip:t,forceMount:r,children:n,container:i}=e,s=R(M,t);return(0,f.jsx)(I,{scope:t,forceMount:r,children:(0,f.jsx)(u.Presence,{present:r||s.open,children:(0,f.jsx)(l.Portal,{asChild:!0,container:i,children:n})})})};P.displayName=M;var L="TooltipContent",$=t.forwardRef((e,t)=>{let r=q(L,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...s}=e,o=R(L,e.__scopeTooltip);return(0,f.jsx)(u.Presence,{present:n||o.open,children:o.disableHoverableContent?(0,f.jsx)(_,{side:i,...s,ref:t}):(0,f.jsx)(j,{side:i,...s,ref:t})})}),j=t.forwardRef((e,r)=>{let i=R(L,e.__scopeTooltip),s=S(L,e.__scopeTooltip),o=t.useRef(null),a=(0,n.useComposedRefs)(r,o),[l,u]=t.useState(null),{trigger:c,onClose:d}=i,h=o.current,{onPointerInTransitChange:p}=s,g=t.useCallback(()=>{u(null),p(!1)},[p]),m=t.useCallback((e,t)=>{let r,n=e.currentTarget,i={x:e.clientX,y:e.clientY},s=function(e,t){let r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(r,n,i,s)){case s:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw Error("unreachable")}}(i,n.getBoundingClientRect());u(((r=[...function(e,t,r=5){let n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return n}(i,s),...function(e){let{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}(t.getBoundingClientRect())].slice()).sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let n=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x))t.pop();else break}t.push(n)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let n=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(n.y-t.y)>=(e.y-t.y)*(n.x-t.x))r.pop();else break}r.push(n)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(r))),p(!0)},[p]);return t.useEffect(()=>()=>g(),[g]),t.useEffect(()=>{if(c&&h){let e=e=>m(e,h),t=e=>m(e,c);return c.addEventListener("pointerleave",e),h.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),h.removeEventListener("pointerleave",t)}}},[c,h,m,g]),t.useEffect(()=>{if(l){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},n=c?.contains(t)||h?.contains(t),i=!function(e,t){let{x:r,y:n}=e,i=!1;for(let e=0,s=t.length-1;e<t.length;s=e++){let o=t[e],a=t[s],l=o.x,u=o.y,c=a.x,d=a.y;u>n!=d>n&&r<(c-l)*(n-u)/(d-u)+l&&(i=!i)}return i}(r,l);n?g():i&&(g(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,h,l,d,g]),(0,f.jsx)(_,{...e,ref:a})}),[N,D]=m(C,{isInside:!1}),V=(0,d.createSlottable)("TooltipContent"),_=t.forwardRef((e,r)=>{let{__scopeTooltip:n,children:i,"aria-label":o,onEscapeKeyDown:l,onPointerDownOutside:u,...c}=e,d=R(L,n),h=v(n),{onClose:p}=d;return t.useEffect(()=>(document.addEventListener(w,p),()=>document.removeEventListener(w,p)),[p]),t.useEffect(()=>{if(d.trigger){let e=e=>{let t=e.target;t?.contains(d.trigger)&&p()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[d.trigger,p]),(0,f.jsx)(s.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:e=>e.preventDefault(),onDismiss:p,children:(0,f.jsxs)(a.Content,{"data-state":d.stateAttribute,...h,...c,ref:r,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,f.jsx)(V,{children:i}),(0,f.jsx)(N,{scope:n,isInside:!0,children:(0,f.jsx)(g,{id:d.contentId,role:"tooltip",children:o||i})})]})})});$.displayName=L;var F="TooltipArrow",B=t.forwardRef((e,t)=>{let{__scopeTooltip:r,...n}=e,i=v(r);return D(F,r).isInside?null:(0,f.jsx)(a.Arrow,{...i,...n,ref:t})});B.displayName=F,e.s(["Arrow",()=>B,"Content",()=>$,"Portal",()=>P,"Provider",()=>k,"Root",()=>T,"Trigger",()=>O],69035)},647163,916073,e=>{"use strict";var t=e.i(7284),r=e.i(923191);let n={database:"log",chat:"response",auth:"response",stream:"response",api:"response",history:"response",vote:"response",document:"response",suggestions:"response"};class i extends Error{type;surface;statusCode;constructor(e,t){super();const[r,n]=e.split(":");this.type=r,this.cause=t,this.surface=n,this.message=function(e){if(e.includes("database"))return"An error occurred while executing a database query.";switch(e){case"bad_request:api":return"The request couldn't be processed. Please check your input and try again.";case"unauthorized:auth":return"You need to sign in before continuing.";case"forbidden:auth":return"Your account does not have access to this feature.";case"rate_limit:chat":return"You have exceeded your maximum number of messages for the day. Please try again later.";case"not_found:chat":return"The requested chat was not found. Please check the chat ID and try again.";case"forbidden:chat":return"This chat belongs to another user. Please check the chat ID and try again.";case"unauthorized:chat":return"You need to sign in to view this chat. Please sign in and try again.";case"offline:chat":return"We're having trouble sending your message. Please check your internet connection and try again.";case"not_found:document":return"The requested document was not found. Please check the document ID and try again.";case"forbidden:document":return"This document belongs to another user. Please check the document ID and try again.";case"unauthorized:document":return"You need to sign in to view this document. Please sign in and try again.";case"bad_request:document":return"The request to create or update the document was invalid. Please check your input and try again.";default:return"Something went wrong. Please try again later."}}(e),this.statusCode=function(e){switch(e){case"bad_request":return 400;case"unauthorized":return 401;case"forbidden":return 403;case"not_found":return 404;case"rate_limit":return 429;case"offline":return 503;default:return 500}}(this.type)}toResponse(){let e=`${this.type}:${this.surface}`,t=n[this.surface],{message:r,cause:i,statusCode:s}=this;return"log"===t?(console.error({code:e,message:r,cause:i}),Response.json({code:"",message:"Something went wrong. Please try again later."},{status:s})):Response.json({code:e,message:r,cause:i},{status:s})}}function s(...e){return(0,r.twMerge)((0,t.clsx)(e))}async function o(e,t){try{let r=await fetch(e,t);if(!r.ok){let{code:e,cause:t}=await r.json();throw new i(e,t)}return r}catch(e){if("undefined"!=typeof navigator&&!navigator.onLine)throw new i("offline:chat");throw e}}function a(e){return e.map(e=>({id:e.id,role:e.role,parts:e.parts.map(e=>{if("file"===e.type&&e.url){let{url:t,...r}=e;return r}return e}),sourceMessageId:e.source_message_id,metadata:e.feedback?{feedbackType:e.feedback.feedbackType}:void 0,fileDetails:e.fileDetails}))}e.s(["ChatSDKError",()=>i],916073),e.s(["cn",()=>s,"convertToUIMessages",()=>a,"fetchWithErrorHandlers",()=>o],647163)},728231,e=>{"use strict";var t=e.i(50897),r=e.i(69035),n=e.i(647163);function i({delayDuration:e=0,...n}){return(0,t.jsx)(r.Provider,{"data-slot":"tooltip-provider",delayDuration:e,...n})}function s({...e}){return(0,t.jsx)(i,{children:(0,t.jsx)(r.Root,{"data-slot":"tooltip",...e})})}function o({...e}){return(0,t.jsx)(r.Trigger,{"data-slot":"tooltip-trigger",...e})}function a({className:e,sideOffset:i=0,children:s,...o}){return(0,t.jsx)(r.Portal,{children:(0,t.jsxs)(r.Content,{"data-slot":"tooltip-content",sideOffset:i,className:(0,n.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...o,children:[s,(0,t.jsx)(r.Arrow,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}e.s(["Tooltip",()=>s,"TooltipContent",()=>a,"TooltipProvider",()=>i,"TooltipTrigger",()=>o])},779342,e=>{"use strict";var t=e.i(266431),r=e.i(874511);let n=Array(12).fill(0),i=({visible:e,className:r})=>t.default.createElement("div",{className:["sonner-loading-wrapper",r].filter(Boolean).join(" "),"data-visible":e},t.default.createElement("div",{className:"sonner-spinner"},n.map((e,r)=>t.default.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),s=t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},t.default.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),o=t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},t.default.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),a=t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},t.default.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),l=t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},t.default.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),u=t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},t.default.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t.default.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),c=1,d=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,i="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:c++,s=this.toasts.find(e=>e.id===i),o=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(t=>t.id===i?(this.publish({...t,...e,id:i,title:r}),{...t,...e,id:i,dismissible:o,title:r}):t):this.addToast({title:r,...n,dismissible:o,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,r)=>{let n,i;if(!r)return;void 0!==r.loading&&(i=this.create({...r,promise:e,type:"loading",message:r.loading,description:"function"!=typeof r.description?r.description:void 0}));let s=Promise.resolve(e instanceof Function?e():e),o=void 0!==i,a=s.then(async e=>{if(n=["resolve",e],t.default.isValidElement(e))o=!1,this.create({id:i,type:"default",message:e});else if(h(e)&&!e.ok){o=!1;let n="function"==typeof r.error?await r.error(`HTTP error! status: ${e.status}`):r.error,s="function"==typeof r.description?await r.description(`HTTP error! status: ${e.status}`):r.description,a="object"!=typeof n||t.default.isValidElement(n)?{message:n}:n;this.create({id:i,type:"error",description:s,...a})}else if(e instanceof Error){o=!1;let n="function"==typeof r.error?await r.error(e):r.error,s="function"==typeof r.description?await r.description(e):r.description,a="object"!=typeof n||t.default.isValidElement(n)?{message:n}:n;this.create({id:i,type:"error",description:s,...a})}else if(void 0!==r.success){o=!1;let n="function"==typeof r.success?await r.success(e):r.success,s="function"==typeof r.description?await r.description(e):r.description,a="object"!=typeof n||t.default.isValidElement(n)?{message:n}:n;this.create({id:i,type:"success",description:s,...a})}}).catch(async e=>{if(n=["reject",e],void 0!==r.error){o=!1;let n="function"==typeof r.error?await r.error(e):r.error,s="function"==typeof r.description?await r.description(e):r.description,a="object"!=typeof n||t.default.isValidElement(n)?{message:n}:n;this.create({id:i,type:"error",description:s,...a})}}).finally(()=>{o&&(this.dismiss(i),i=void 0),null==r.finally||r.finally.call(r)}),l=()=>new Promise((e,t)=>a.then(()=>"reject"===n[0]?t(n[1]):e(n[1])).catch(t));return"string"!=typeof i&&"number"!=typeof i?{unwrap:l}:Object.assign(i,{unwrap:l})},this.custom=(e,t)=>{let r=(null==t?void 0:t.id)||c++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},h=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,f=Object.assign((e,t)=>{let r=(null==t?void 0:t.id)||c++;return d.addToast({title:e,...t,id:r}),r},{success:d.success,info:d.info,warning:d.warning,error:d.error,custom:d.custom,message:d.message,promise:d.promise,dismiss:d.dismiss,loading:d.loading},{getHistory:()=>d.toasts,getToasts:()=>d.getActiveToasts()});function p(e){return void 0!==e.label}function g(...e){return e.filter(Boolean).join(" ")}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");let m=e=>{var r,n,c,d,h,f,m,y,v,b,w,x,S;let{invert:k,toast:C,unstyled:E,interacting:R,setHeights:T,visibleToasts:A,heights:O,index:M,toasts:I,expanded:q,removeToast:P,defaultRichColors:L,closeButton:$,style:j,cancelButtonStyle:N,actionButtonStyle:D,className:V="",descriptionClassName:_="",duration:F,position:B,gap:Q,expandByDefault:U,classNames:W,icons:z,closeButtonAriaLabel:H="Close toast"}=e,[Y,J]=t.default.useState(null),[K,X]=t.default.useState(null),[G,Z]=t.default.useState(!1),[ee,et]=t.default.useState(!1),[er,en]=t.default.useState(!1),[ei,es]=t.default.useState(!1),[eo,ea]=t.default.useState(!1),[el,eu]=t.default.useState(0),[ec,ed]=t.default.useState(0),eh=t.default.useRef(C.duration||F||4e3),ef=t.default.useRef(null),ep=t.default.useRef(null),eg=0===M,em=M+1<=A,ey=C.type,ev=!1!==C.dismissible,eb=C.className||"",ew=C.descriptionClassName||"",ex=t.default.useMemo(()=>O.findIndex(e=>e.toastId===C.id)||0,[O,C.id]),eS=t.default.useMemo(()=>{var e;return null!=(e=C.closeButton)?e:$},[C.closeButton,$]),ek=t.default.useMemo(()=>C.duration||F||4e3,[C.duration,F]),eC=t.default.useRef(0),eE=t.default.useRef(0),eR=t.default.useRef(0),eT=t.default.useRef(null),[eA,eO]=B.split("-"),eM=t.default.useMemo(()=>O.reduce((e,t,r)=>r>=ex?e:e+t.height,0),[O,ex]),eI=(()=>{let[e,r]=t.default.useState(document.hidden);return t.default.useEffect(()=>{let e=()=>{r(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),eq=C.invert||k,eP="loading"===ey;eE.current=t.default.useMemo(()=>ex*Q+eM,[ex,eM]),t.default.useEffect(()=>{eh.current=ek},[ek]),t.default.useEffect(()=>{Z(!0)},[]),t.default.useEffect(()=>{let e=ep.current;if(e){let t=e.getBoundingClientRect().height;return ed(t),T(e=>[{toastId:C.id,height:t,position:C.position},...e]),()=>T(e=>e.filter(e=>e.toastId!==C.id))}},[T,C.id]),t.default.useLayoutEffect(()=>{if(!G)return;let e=ep.current,t=e.style.height;e.style.height="auto";let r=e.getBoundingClientRect().height;e.style.height=t,ed(r),T(e=>e.find(e=>e.toastId===C.id)?e.map(e=>e.toastId===C.id?{...e,height:r}:e):[{toastId:C.id,height:r,position:C.position},...e])},[G,C.title,C.description,T,C.id,C.jsx,C.action,C.cancel]);let eL=t.default.useCallback(()=>{et(!0),eu(eE.current),T(e=>e.filter(e=>e.toastId!==C.id)),setTimeout(()=>{P(C)},200)},[C,P,T,eE]);t.default.useEffect(()=>{let e;if((!C.promise||"loading"!==ey)&&C.duration!==1/0&&"loading"!==C.type){if(q||R||eI){if(eR.current<eC.current){let e=new Date().getTime()-eC.current;eh.current=eh.current-e}eR.current=new Date().getTime()}else eh.current!==1/0&&(eC.current=new Date().getTime(),e=setTimeout(()=>{null==C.onAutoClose||C.onAutoClose.call(C,C),eL()},eh.current));return()=>clearTimeout(e)}},[q,R,C,ey,eI,eL]),t.default.useEffect(()=>{C.delete&&(eL(),null==C.onDismiss||C.onDismiss.call(C,C))},[eL,C.delete]);let e$=C.icon||(null==z?void 0:z[ey])||(e=>{switch(e){case"success":return s;case"info":return a;case"warning":return o;case"error":return l;default:return null}})(ey);return t.default.createElement("li",{tabIndex:0,ref:ep,className:g(V,eb,null==W?void 0:W.toast,null==C||null==(r=C.classNames)?void 0:r.toast,null==W?void 0:W.default,null==W?void 0:W[ey],null==C||null==(n=C.classNames)?void 0:n[ey]),"data-sonner-toast":"","data-rich-colors":null!=(b=C.richColors)?b:L,"data-styled":!(C.jsx||C.unstyled||E),"data-mounted":G,"data-promise":!!C.promise,"data-swiped":eo,"data-removed":ee,"data-visible":em,"data-y-position":eA,"data-x-position":eO,"data-index":M,"data-front":eg,"data-swiping":er,"data-dismissible":ev,"data-type":ey,"data-invert":eq,"data-swipe-out":ei,"data-swipe-direction":K,"data-expanded":!!(q||U&&G),"data-testid":C.testId,style:{"--index":M,"--toasts-before":M,"--z-index":I.length-M,"--offset":`${ee?el:eE.current}px`,"--initial-height":U?"auto":`${ec}px`,...j,...C.style},onDragEnd:()=>{en(!1),J(null),eT.current=null},onPointerDown:e=>{2===e.button||eP||!ev||(ef.current=new Date,eu(eE.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(en(!0),eT.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,r,n,i;if(ei||!ev)return;eT.current=null;let s=Number((null==(e=ep.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),o=Number((null==(t=ep.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),a=new Date().getTime()-(null==(r=ef.current)?void 0:r.getTime()),l="x"===Y?s:o,u=Math.abs(l)/a;if(Math.abs(l)>=45||u>.11){eu(eE.current),null==C.onDismiss||C.onDismiss.call(C,C),"x"===Y?X(s>0?"right":"left"):X(o>0?"down":"up"),eL(),es(!0);return}null==(n=ep.current)||n.style.setProperty("--swipe-amount-x","0px"),null==(i=ep.current)||i.style.setProperty("--swipe-amount-y","0px"),ea(!1),en(!1),J(null)},onPointerMove:t=>{var r,n,i,s;if(!eT.current||!ev||(null==(r=window.getSelection())?void 0:r.toString().length)>0)return;let o=t.clientY-eT.current.y,a=t.clientX-eT.current.x,l=null!=(s=e.swipeDirections)?s:function(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}(B);!Y&&(Math.abs(a)>1||Math.abs(o)>1)&&J(Math.abs(a)>Math.abs(o)?"x":"y");let u={x:0,y:0},c=e=>1/(1.5+Math.abs(e)/20);if("y"===Y){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&o<0||l.includes("bottom")&&o>0)u.y=o;else{let e=o*c(o);u.y=Math.abs(e)<Math.abs(o)?e:o}}else if("x"===Y&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&a<0||l.includes("right")&&a>0)u.x=a;else{let e=a*c(a);u.x=Math.abs(e)<Math.abs(a)?e:a}(Math.abs(u.x)>0||Math.abs(u.y)>0)&&ea(!0),null==(n=ep.current)||n.style.setProperty("--swipe-amount-x",`${u.x}px`),null==(i=ep.current)||i.style.setProperty("--swipe-amount-y",`${u.y}px`)}},eS&&!C.jsx&&"loading"!==ey?t.default.createElement("button",{"aria-label":H,"data-disabled":eP,"data-close-button":!0,onClick:eP||!ev?()=>{}:()=>{eL(),null==C.onDismiss||C.onDismiss.call(C,C)},className:g(null==W?void 0:W.closeButton,null==C||null==(c=C.classNames)?void 0:c.closeButton)},null!=(w=null==z?void 0:z.close)?w:u):null,(ey||C.icon||C.promise)&&null!==C.icon&&((null==z?void 0:z[ey])!==null||C.icon)?t.default.createElement("div",{"data-icon":"",className:g(null==W?void 0:W.icon,null==C||null==(d=C.classNames)?void 0:d.icon)},C.promise||"loading"===C.type&&!C.icon?C.icon||((null==z?void 0:z.loading)?t.default.createElement("div",{className:g(null==W?void 0:W.loader,null==C||null==(S=C.classNames)?void 0:S.loader,"sonner-loader"),"data-visible":"loading"===ey},z.loading):t.default.createElement(i,{className:g(null==W?void 0:W.loader,null==C||null==(x=C.classNames)?void 0:x.loader),visible:"loading"===ey})):null,"loading"!==C.type?e$:null):null,t.default.createElement("div",{"data-content":"",className:g(null==W?void 0:W.content,null==C||null==(h=C.classNames)?void 0:h.content)},t.default.createElement("div",{"data-title":"",className:g(null==W?void 0:W.title,null==C||null==(f=C.classNames)?void 0:f.title)},C.jsx?C.jsx:"function"==typeof C.title?C.title():C.title),C.description?t.default.createElement("div",{"data-description":"",className:g(_,ew,null==W?void 0:W.description,null==C||null==(m=C.classNames)?void 0:m.description)},"function"==typeof C.description?C.description():C.description):null),t.default.isValidElement(C.cancel)?C.cancel:C.cancel&&p(C.cancel)?t.default.createElement("button",{"data-button":!0,"data-cancel":!0,style:C.cancelButtonStyle||N,onClick:e=>{!p(C.cancel)||ev&&(null==C.cancel.onClick||C.cancel.onClick.call(C.cancel,e),eL())},className:g(null==W?void 0:W.cancelButton,null==C||null==(y=C.classNames)?void 0:y.cancelButton)},C.cancel.label):null,t.default.isValidElement(C.action)?C.action:C.action&&p(C.action)?t.default.createElement("button",{"data-button":!0,"data-action":!0,style:C.actionButtonStyle||D,onClick:e=>{!p(C.action)||(null==C.action.onClick||C.action.onClick.call(C.action,e),e.defaultPrevented||eL())},className:g(null==W?void 0:W.actionButton,null==C||null==(v=C.classNames)?void 0:v.actionButton)},C.action.label):null)};function y(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}let v=t.default.forwardRef(function(e,n){let{id:i,invert:s,position:o="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:u,className:c,offset:h,mobileOffset:f,theme:p="light",richColors:g,duration:v,style:b,visibleToasts:w=3,toastOptions:x,dir:S=y(),gap:k=14,icons:C,containerAriaLabel:E="Notifications"}=e,[R,T]=t.default.useState([]),A=t.default.useMemo(()=>i?R.filter(e=>e.toasterId===i):R.filter(e=>!e.toasterId),[R,i]),O=t.default.useMemo(()=>Array.from(new Set([o].concat(A.filter(e=>e.position).map(e=>e.position)))),[A,o]),[M,I]=t.default.useState([]),[q,P]=t.default.useState(!1),[L,$]=t.default.useState(!1),[j,N]=t.default.useState("system"!==p?p:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=t.default.useRef(null),V=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=t.default.useRef(null),F=t.default.useRef(!1),B=t.default.useCallback(e=>{T(t=>{var r;return(null==(r=t.find(t=>t.id===e.id))?void 0:r.delete)||d.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return t.default.useEffect(()=>d.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{T(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))}):setTimeout(()=>{r.default.flushSync(()=>{T(t=>{let r=t.findIndex(t=>t.id===e.id);return -1!==r?[...t.slice(0,r),{...t[r],...e},...t.slice(r+1)]:[e,...t]})})})}),[R]),t.default.useEffect(()=>{if("system"!==p)return void N(p);if("system"===p&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?N("dark"):N("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{e?N("dark"):N("light")})}catch(t){e.addListener(({matches:e})=>{try{e?N("dark"):N("light")}catch(e){console.error(e)}})}},[p]),t.default.useEffect(()=>{R.length<=1&&P(!1)},[R]),t.default.useEffect(()=>{let e=e=>{var t,r;a.every(t=>e[t]||e.code===t)&&(P(!0),null==(r=D.current)||r.focus()),"Escape"===e.code&&(document.activeElement===D.current||(null==(t=D.current)?void 0:t.contains(document.activeElement)))&&P(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),t.default.useEffect(()=>{if(D.current)return()=>{_.current&&(_.current.focus({preventScroll:!0}),_.current=null,F.current=!1)}},[D.current]),t.default.createElement("section",{ref:n,"aria-label":`${E} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((r,n)=>{var i;let o,[a,d]=r.split("-");return A.length?t.default.createElement("ol",{key:r,dir:"auto"===S?y():S,tabIndex:-1,ref:D,className:c,"data-sonner-toaster":!0,"data-sonner-theme":j,"data-y-position":a,"data-x-position":d,style:{"--front-toast-height":`${(null==(i=M[0])?void 0:i.height)||0}px`,"--width":"356px","--gap":`${k}px`,...b,...(o={},[h,f].forEach((e,t)=>{let r=1===t,n=r?"--mobile-offset":"--offset",i=r?"16px":"24px";function s(e){["top","right","bottom","left"].forEach(t=>{o[`${n}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?s(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?o[`${n}-${t}`]=i:o[`${n}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):s(i)}),o)},onBlur:e=>{F.current&&!e.currentTarget.contains(e.relatedTarget)&&(F.current=!1,_.current&&(_.current.focus({preventScroll:!0}),_.current=null))},onFocus:e=>{!(e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible)&&(F.current||(F.current=!0,_.current=e.relatedTarget))},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{L||P(!1)},onDragEnd:()=>P(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||$(!0)},onPointerUp:()=>$(!1)},A.filter(e=>!e.position&&0===n||e.position===r).map((n,i)=>{var o,a;return t.default.createElement(m,{key:n.id,icons:C,index:i,toast:n,defaultRichColors:g,duration:null!=(o=null==x?void 0:x.duration)?o:v,className:null==x?void 0:x.className,descriptionClassName:null==x?void 0:x.descriptionClassName,invert:s,visibleToasts:w,closeButton:null!=(a=null==x?void 0:x.closeButton)?a:u,interacting:L,position:r,style:null==x?void 0:x.style,unstyled:null==x?void 0:x.unstyled,classNames:null==x?void 0:x.classNames,cancelButtonStyle:null==x?void 0:x.cancelButtonStyle,actionButtonStyle:null==x?void 0:x.actionButtonStyle,closeButtonAriaLabel:null==x?void 0:x.closeButtonAriaLabel,removeToast:B,toasts:A.filter(e=>e.position==n.position),heights:M.filter(e=>e.position==n.position),setHeights:I,expandByDefault:l,gap:k,expanded:q,swipeDirections:e.swipeDirections})})):null}))});e.s(["Toaster",()=>v,"toast",()=>f])},30593,e=>{"use strict";var t=e.i(266431);function r(){let[e,r]=t.useState(void 0);return t.useEffect(()=>{let e=window.matchMedia("(max-width: 767px)"),t=()=>{r(window.innerWidth<768)};return e.addEventListener("change",t),r(window.innerWidth<768),()=>e.removeEventListener("change",t)},[]),!!e}e.s(["useIsMobile",()=>r])},781562,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={callServer:function(){return s.callServer},createServerReference:function(){return a.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(209644),o=e.r(828500),a=e.r(635316)},426735,e=>{"use strict";var t=e.i(266431),r=e.i(781562),n=(0,r.createServerReference)("7f4635a43b11bf47d7491f2aae9969901cf8d336d3",r.callServer,void 0,r.findSourceMapURL,"checkSessionAction"),i=(0,r.createServerReference)("7f014761287bf04dda17b8d07511174e91f57ed8db",r.callServer,void 0,r.findSourceMapURL,"getAuthAction"),s=(0,r.createServerReference)("7f6e591f4eaf25ecb2a6d375e3f0725c4f8ee805b7",r.callServer,void 0,r.findSourceMapURL,"handleSignOutAction"),o=(0,r.createServerReference)("7f03dc2135c6af74c539e66edb5fbaa7edd44b3867",r.callServer,void 0,r.findSourceMapURL,"refreshAuthAction"),a=(0,r.createServerReference)("7f0021bab0e25a292ef58f0b27600770c05779ab47",r.callServer,void 0,r.findSourceMapURL,"switchToOrganizationAction");let l=(0,t.createContext)(void 0);function u({ensureSignedIn:e=!1}={}){let r=(0,t.useContext)(l);if((0,t.useEffect)(()=>{r&&e&&!r.user&&!r.loading&&r.getAuth({ensureSignedIn:e})},[e,null==r?void 0:r.user,null==r?void 0:r.loading,null==r?void 0:r.getAuth]),!r)throw Error("useAuth must be used within an AuthKitProvider");return r}e.s(["AuthKitProvider",0,({children:e,onSessionExpired:r,initialAuth:u})=>{var c;let[d,h]=(0,t.useState)(null!=(c=null==u?void 0:u.user)?c:null),[f,p]=(0,t.useState)(null==u?void 0:u.sessionId),[g,m]=(0,t.useState)(null==u?void 0:u.organizationId),[y,v]=(0,t.useState)(null==u?void 0:u.role),[b,w]=(0,t.useState)(null==u?void 0:u.roles),[x,S]=(0,t.useState)(null==u?void 0:u.permissions),[k,C]=(0,t.useState)(null==u?void 0:u.entitlements),[E,R]=(0,t.useState)(null==u?void 0:u.featureFlags),[T,A]=(0,t.useState)(null==u?void 0:u.impersonator),[O,M]=(0,t.useState)(!u),I=(0,t.useCallback)(async({ensureSignedIn:e=!1}={})=>{M(!0);try{let t=await i({ensureSignedIn:e});h(t.user),p(t.sessionId),m(t.organizationId),v(t.role),w(t.roles),S(t.permissions),C(t.entitlements),R(t.featureFlags),A(t.impersonator)}catch(e){h(null),p(void 0),m(void 0),v(void 0),w(void 0),S(void 0),C(void 0),R(void 0),A(void 0)}finally{M(!1)}},[]),q=(0,t.useCallback)(async(e,t={})=>{let r={revalidationStrategy:"none",...t},n=await a(e,{revalidationStrategy:"none",...t});return"none"===r.revalidationStrategy&&await I({ensureSignedIn:!0}),n},[]),P=(0,t.useCallback)(async({ensureSignedIn:e=!1,organizationId:t}={})=>{try{M(!0);let r=await o({ensureSignedIn:e,organizationId:t});h(r.user),p(r.sessionId),m(r.organizationId),v(r.role),w(r.roles),S(r.permissions),C(r.entitlements),R(r.featureFlags),A(r.impersonator)}catch(e){return e instanceof Error?{error:e.message}:{error:String(e)}}finally{M(!1)}},[]),L=(0,t.useCallback)(async({returnTo:e}={})=>{await s({returnTo:e})},[]);return(0,t.useEffect)(()=>{if(u||I(),!1===r)return;let e=!1,t=async()=>{if(!e&&"visible"===document.visibilityState){e=!0;try{if(!await n())throw Error("Session expired")}catch(e){e instanceof Error&&e.message.includes("Failed to fetch")&&(r?r():window.location.reload())}finally{e=!1}}};return window.addEventListener("visibilitychange",t),window.addEventListener("focus",t),()=>{window.removeEventListener("focus",t),window.removeEventListener("visibilitychange",t)}},[r]),t.default.createElement(l.Provider,{value:{user:d,sessionId:f,organizationId:g,role:y,roles:b,permissions:x,entitlements:k,featureFlags:E,impersonator:T,loading:O,getAuth:I,refreshAuth:P,signOut:L,switchToOrganization:q}},e)},"useAuth",()=>u],426735)},511655,803169,170367,445589,916362,489033,670549,100522,288588,80181,599632,425239,228189,e=>{"use strict";let t;for(var r,n,i=e.i(266431),s=[],o=[],a=Uint8Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,c=l.length;u<c;++u)s[u]=l[u],o[l.charCodeAt(u)]=u;function d(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function h(e){var t=d(e),r=t[0],n=t[1];return(r+n)*3/4-n}function f(e){var t,r,n=d(e),i=n[0],s=n[1],l=new a((i+s)*3/4-s),u=0,c=s>0?i-4:i;for(r=0;r<c;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===s&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===s&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l}function p(e){for(var t,r=e.length,n=r%3,i=[],o=0,a=r-n;o<a;o+=16383)i.push(function(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s[n>>18&63]+s[n>>12&63]+s[n>>6&63]+s[63&n]);return i.join("")}(e,o,o+16383>a?a:o+16383));return 1===n?i.push(s[(t=e[r-1])>>2]+s[t<<4&63]+"=="):2===n&&i.push(s[(t=(e[r-2]<<8)+e[r-1])>>10]+s[t>>4&63]+s[t<<2&63]+"="),i.join("")}function g(e){return p(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function m(e){if(void 0===e)return{};if(!v(e))throw Error(`The arguments to a Convex function must be an object. Received: ${e}`);return e}function y(e){if(void 0===e)throw Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if("string"!=typeof e)throw Error(`Invalid deployment address: found ${e}".`);if(!(e.startsWith("http:")||e.startsWith("https:")))throw Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${e}".`);try{new URL(e)}catch{throw Error(`Invalid deployment address: "${e}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(e.endsWith(".convex.site"))throw Error(`Invalid deployment address: "${e}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function v(e){let t="object"==typeof e,r=Object.getPrototypeOf(e),n=null===r||r===Object.prototype||r?.constructor?.name==="Object";return t&&n}o[45]=62,o[95]=63,e.s(["byteLength",()=>h,"fromByteArray",()=>p,"fromByteArrayUrlSafeNoPadding",()=>g,"toByteArray",()=>f],74632),e.s(["isSimpleObject",()=>v,"parseArgs",()=>m,"validateDeploymentUrl",()=>y],803169);let b=BigInt("-9223372036854775808"),w=BigInt("9223372036854775807"),x=BigInt("0"),S=BigInt("8"),k=BigInt("256");function C(e){return Number.isNaN(e)||!Number.isFinite(e)||Object.is(e,-0)}let E=DataView.prototype.setBigInt64?function(e){if(e<b||w<e)throw Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);let t=new ArrayBuffer(8);return new DataView(t).setBigInt64(0,e,!0),p(new Uint8Array(t))}:function(e){e<x&&(e-=b+b);let t=e.toString(16);t.length%2==1&&(t="0"+t);let r=new Uint8Array(new ArrayBuffer(8)),n=0;for(let i of t.match(/.{2}/g).reverse())r.set([parseInt(i,16)],n++),e>>=S;return p(r)},R=DataView.prototype.getBigInt64?function(e){let t=f(e);if(8!==t.byteLength)throw Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);return new DataView(t.buffer).getBigInt64(0,!0)}:function(e){let t=f(e);if(8!==t.byteLength)throw Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);let r=x,n=x;for(let e of t)r+=BigInt(e)*k**n,n++;return r>w&&(r+=b+b),r};function T(e){if(e.length>1024)throw Error(`Field name ${e} exceeds maximum field name length 1024.`);if(e.startsWith("$"))throw Error(`Field name ${e} starts with a '$', which is reserved.`);for(let t=0;t<e.length;t+=1){let r=e.charCodeAt(t);if(r<32||r>=127)throw Error(`Field name ${e} has invalid character '${e[t]}': Field names can only contain non-control ASCII characters`)}}function A(e){if(null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e)return e;if(Array.isArray(e))return e.map(e=>A(e));if("object"!=typeof e)throw Error(`Unexpected type of ${e}`);let t=Object.entries(e);if(1===t.length){let r=t[0][0];if("$bytes"===r){if("string"!=typeof e.$bytes)throw Error(`Malformed $bytes field on ${e}`);return f(e.$bytes).buffer}if("$integer"===r){if("string"!=typeof e.$integer)throw Error(`Malformed $integer field on ${e}`);return R(e.$integer)}if("$float"===r){if("string"!=typeof e.$float)throw Error(`Malformed $float field on ${e}`);let t=f(e.$float);if(8!==t.byteLength)throw Error(`Received ${t.byteLength} bytes, expected 8 for $float`);let r=new DataView(t.buffer).getFloat64(0,!0);if(!C(r))throw Error(`Float ${r} should be encoded as a number`);return r}if("$set"===r)throw Error("Received a Set which is no longer supported as a Convex type.");if("$map"===r)throw Error("Received a Map which is no longer supported as a Convex type.")}let r={};for(let[t,n]of Object.entries(e))T(t),r[t]=A(n);return r}function O(e){let t=JSON.stringify(e,(e,t)=>void 0===t?"undefined":"bigint"==typeof t?`${t.toString()}n`:t);if(t.length>16384){let e="[...truncated]",r=16384-e.length,n=t.codePointAt(r-1);return void 0!==n&&n>65535&&(r-=1),t.substring(0,r)+e}return t}function M(e,t,r,n){if(void 0===e){let e=r&&` (present at path ${r} in original object ${O(t)})`;throw Error(`undefined is not a valid Convex value${e}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(null===e)return e;if("bigint"==typeof e){if(e<b||w<e)throw Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);return{$integer:E(e)}}if("number"==typeof e)if(!C(e))return e;else{let t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e,!0),{$float:p(new Uint8Array(t))}}if("boolean"==typeof e||"string"==typeof e)return e;if(e instanceof ArrayBuffer)return{$bytes:p(new Uint8Array(e))};if(Array.isArray(e))return e.map((e,n)=>M(e,t,r+`[${n}]`,!1));if(e instanceof Set)throw Error(I(r,"Set",[...e],t));if(e instanceof Map)throw Error(I(r,"Map",[...e],t));if(!v(e)){let n=e?.constructor?.name;throw Error(I(r,n?`${n} `:"",e,t))}let i={},s=Object.entries(e);for(let[e,o]of(s.sort(([e,t],[r,n])=>e===r?0:e<r?-1:1),s))void 0!==o?(T(e),i[e]=M(o,t,r+`.${e}`,!1)):n&&(T(e),i[e]=q(o,t,r+`.${e}`));return i}function I(e,t,r,n){return e?`${t}${O(r)} is not a supported Convex type (present at path ${e} in original object ${O(n)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${t}${O(r)} is not a supported Convex type.`}function q(e,t,r){if(void 0===e)return{$undefined:null};if(void 0===t)throw Error(`Programming error. Current value is ${O(e)} but original value is undefined`);return M(e,t,r,!1)}function P(e){return M(e,e,"",!1)}function L(e){return q(e,e,"")}function $(e){return M(e,e,"",!0)}e.s(["convexOrUndefinedToJson",()=>L,"convexToJson",()=>P,"jsonToConvex",()=>A,"patchValueToJson",()=>$,"stringifyValueForError",()=>O],170367);var j=Object.defineProperty,N=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?j(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class D{constructor({isOptional:e}){N(this,"type"),N(this,"fieldPaths"),N(this,"isOptional"),N(this,"isConvexValidator"),this.isOptional=e,this.isConvexValidator=!0}}class V extends D{constructor({isOptional:e,tableName:t}){if(super({isOptional:e}),N(this,"tableName"),N(this,"kind","id"),"string"!=typeof t)throw Error("v.id(tableName) requires a string");this.tableName=t}get json(){return{type:"id",tableName:this.tableName}}asOptional(){return new V({isOptional:"optional",tableName:this.tableName})}}class _ extends D{constructor(){super(...arguments),N(this,"kind","float64")}get json(){return{type:"number"}}asOptional(){return new _({isOptional:"optional"})}}class F extends D{constructor(){super(...arguments),N(this,"kind","int64")}get json(){return{type:"bigint"}}asOptional(){return new F({isOptional:"optional"})}}class B extends D{constructor(){super(...arguments),N(this,"kind","boolean")}get json(){return{type:this.kind}}asOptional(){return new B({isOptional:"optional"})}}class Q extends D{constructor(){super(...arguments),N(this,"kind","bytes")}get json(){return{type:this.kind}}asOptional(){return new Q({isOptional:"optional"})}}class U extends D{constructor(){super(...arguments),N(this,"kind","string")}get json(){return{type:this.kind}}asOptional(){return new U({isOptional:"optional"})}}class W extends D{constructor(){super(...arguments),N(this,"kind","null")}get json(){return{type:this.kind}}asOptional(){return new W({isOptional:"optional"})}}class z extends D{constructor(){super(...arguments),N(this,"kind","any")}get json(){return{type:this.kind}}asOptional(){return new z({isOptional:"optional"})}}class H extends D{constructor({isOptional:e,fields:t}){super({isOptional:e}),N(this,"fields"),N(this,"kind","object"),globalThis.Object.values(t).forEach(e=>{if(!e.isConvexValidator)throw Error("v.object() entries must be validators")}),this.fields=t}get json(){return{type:this.kind,value:globalThis.Object.fromEntries(globalThis.Object.entries(this.fields).map(([e,t])=>[e,{fieldType:t.json,optional:"optional"===t.isOptional}]))}}asOptional(){return new H({isOptional:"optional",fields:this.fields})}omit(...e){let t={...this.fields};for(let r of e)delete t[r];return new H({isOptional:this.isOptional,fields:t})}pick(...e){let t={};for(let r of e)t[r]=this.fields[r];return new H({isOptional:this.isOptional,fields:t})}partial(){let e={};for(let[t,r]of globalThis.Object.entries(this.fields))e[t]=r.asOptional();return new H({isOptional:this.isOptional,fields:e})}extend(e){return new H({isOptional:this.isOptional,fields:{...this.fields,...e}})}}class Y extends D{constructor({isOptional:e,value:t}){if(super({isOptional:e}),N(this,"value"),N(this,"kind","literal"),"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t&&"bigint"!=typeof t)throw Error("v.literal(value) must be a string, number, or boolean");this.value=t}get json(){return{type:this.kind,value:P(this.value)}}asOptional(){return new Y({isOptional:"optional",value:this.value})}}class J extends D{constructor({isOptional:e,element:t}){super({isOptional:e}),N(this,"element"),N(this,"kind","array"),this.element=t}get json(){return{type:this.kind,value:this.element.json}}asOptional(){return new J({isOptional:"optional",element:this.element})}}class K extends D{constructor({isOptional:e,key:t,value:r}){if(super({isOptional:e}),N(this,"key"),N(this,"value"),N(this,"kind","record"),"optional"===t.isOptional)throw Error("Record validator cannot have optional keys");if("optional"===r.isOptional)throw Error("Record validator cannot have optional values");if(!t.isConvexValidator||!r.isConvexValidator)throw Error("Key and value of v.record() but be validators");this.key=t,this.value=r}get json(){return{type:this.kind,keys:this.key.json,values:{fieldType:this.value.json,optional:!1}}}asOptional(){return new K({isOptional:"optional",key:this.key,value:this.value})}}class X extends D{constructor({isOptional:e,members:t}){super({isOptional:e}),N(this,"members"),N(this,"kind","union"),t.forEach(e=>{if(!e.isConvexValidator)throw Error("All members of v.union() must be validators")}),this.members=t}get json(){return{type:this.kind,value:this.members.map(e=>e.json)}}asOptional(){return new X({isOptional:"optional",members:this.members})}}function G(e){return!!e.isConvexValidator}function Z(e){return G(e)?e:ee.object(e)}let ee={id:e=>new V({isOptional:"required",tableName:e}),null:()=>new W({isOptional:"required"}),number:()=>new _({isOptional:"required"}),float64:()=>new _({isOptional:"required"}),bigint:()=>new F({isOptional:"required"}),int64:()=>new F({isOptional:"required"}),boolean:()=>new B({isOptional:"required"}),string:()=>new U({isOptional:"required"}),bytes:()=>new Q({isOptional:"required"}),literal:e=>new Y({isOptional:"required",value:e}),array:e=>new J({isOptional:"required",element:e}),object:e=>new H({isOptional:"required",fields:e}),record:(e,t)=>new K({isOptional:"required",key:e,value:t}),union:(...e)=>new X({isOptional:"required",members:e}),any:()=>new z({isOptional:"required"}),optional:e=>e.asOptional(),nullable:e=>ee.union(e,ee.null())};e.s(["asObjectValidator",()=>Z,"isValidator",()=>G,"v",0,ee],445589);var et=e.i(74632),er=Object.defineProperty,en=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?er(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};let ei=Symbol.for("ConvexError");class es extends(n=Error,r=ei,n){constructor(e){super("string"==typeof e?e:O(e)),en(this,"name","ConvexError"),en(this,"data"),en(this,r,!0),this.data=e}}e.s(["ConvexError",()=>es],916362);let eo=()=>Array.from({length:4},()=>0);eo(),eo(),e.s([],489033),e.s(["ConvexProvider",()=>ti,"ConvexReactClient",()=>tt,"useAction",()=>ta,"useConvex",()=>tn,"useMutation",()=>to,"useQuery",()=>ts],80181);let ea="1.29.2";e.s(["version",0,ea],670549);var el=Object.defineProperty,eu=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?el(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};function ec(e){switch(e){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class ed{constructor(e){eu(this,"_onLogLineFuncs"),eu(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let e=0;e<10&&void 0!==this._onLogLineFuncs[t];e++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(let t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(let t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(let t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(let t of Object.values(this._onLogLineFuncs))t("error",...e)}}function eh(e){let t=new ed(e);return t.addLogLineListener((e,...t)=>{switch(e){case"debug":console.debug(...t);break;case"info":default:console.log(...t);break;case"warn":console.warn(...t);break;case"error":console.error(...t)}}),t}function ef(e,t,r,n,i){let s=ec(r);if("object"==typeof i&&(i=`ConvexError ${JSON.stringify(i.errorData,null,2)}`),"info"===t){let t=i.match(/^\[.*?\] /);if(null===t)return void e.error(`[CONVEX ${s}(${n})] Could not parse console.log`);let r=i.slice(1,t[0].length-2),o=i.slice(t[0].length);e.log(`%c[CONVEX ${s}(${n})] [${r}]`,"color:rgb(0, 145, 255)",o)}else e.error(`[CONVEX ${s}(${n})] ${i}`)}function ep(e,t,r){let n=ec(e);return`[CONVEX ${n}(${t})] ${r.errorMessage}
  Called by client`}function eg(e,t){return t.data=e.errorData,t}function em(e){let t,r,n=e.split(":");return 1===n.length?(t=n[0],r="default"):(t=n.slice(0,n.length-1).join(":"),r=n[n.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${r}`}function ey(e,t){return JSON.stringify({udfPath:em(e),args:P(t)})}var ev=Object.defineProperty,eb=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?ev(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class ew{constructor(){eb(this,"nextQueryId"),eb(this,"querySetVersion"),eb(this,"querySet"),eb(this,"queryIdToToken"),eb(this,"identityVersion"),eb(this,"auth"),eb(this,"outstandingQueriesOlderThanRestart"),eb(this,"outstandingAuthOlderThanRestart"),eb(this,"paused"),eb(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return 0===this.outstandingQueriesOlderThanRestart.size&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,r,n){let i=em(e),s=ey(i,t),o=this.querySet.get(s);if(void 0!==o)return o.numSubscribers+=1,{queryToken:s,modification:null,unsubscribe:()=>this.removeSubscriber(s)};{let e=this.nextQueryId++;this.querySet.set(s,{id:e,canonicalizedUdfPath:i,args:t,numSubscribers:1,journal:r,componentPath:n}),this.queryIdToToken.set(e,s);let o=this.querySetVersion,a=this.querySetVersion+1,l={type:"Add",queryId:e,udfPath:i,args:[P(t)],journal:r,componentPath:n};return this.paused?this.pendingQuerySetModifications.set(e,l):this.querySetVersion=a,{queryToken:s,modification:{type:"ModifyQuerySet",baseVersion:o,newVersion:a,modifications:[l]},unsubscribe:()=>this.removeSubscriber(s)}}}transition(e){for(let t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);let e=t.journal;if(void 0!==e){let r=this.queryIdToToken.get(t.queryId);void 0!==r&&(this.querySet.get(r).journal=e)}break}case"QueryRemoved":this.outstandingQueriesOlderThanRestart.delete(t.queryId);break;default:throw Error(`Invalid modification ${t.type}`)}}queryId(e,t){let r=ey(em(e),t),n=this.querySet.get(r);return void 0!==n?n.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}getAuth(){return this.auth}setAuth(e){this.auth={tokenType:"User",value:e};let t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e,t){let r={tokenType:"Admin",value:e,impersonating:t};this.auth=r;let n=this.identityVersion;return this.paused||(this.identityVersion=n+1),{type:"Authenticate",baseVersion:n,...r}}clearAuth(){this.auth=void 0,this.markAuthCompletion();let e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){return this.auth?.value!==e}queryPath(e){let t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){let t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){return this.querySet.get(e)?.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();let t=[];for(let r of this.querySet.values()){let n={type:"Add",queryId:r.id,udfPath:r.canonicalizedUdfPath,args:[P(r.args)],journal:r.journal,componentPath:r.componentPath};t.push(n),e.has(r.id)||this.outstandingQueriesOlderThanRestart.add(r.id)}this.querySetVersion=1;let r={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[r,void 0];this.outstandingAuthOlderThanRestart=!0;let n={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[r,n]}pause(){this.paused=!0}resume(){let e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,t=void 0!==this.auth?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,t]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){let t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id);let r=this.querySetVersion,n=this.querySetVersion+1,i={type:"Remove",queryId:t.id};return this.paused?this.pendingQuerySetModifications.has(t.id)?this.pendingQuerySetModifications.delete(t.id):this.pendingQuerySetModifications.set(t.id,i):this.querySetVersion=n,{type:"ModifyQuerySet",baseVersion:r,newVersion:n,modifications:[i]}}}}var ex=Object.defineProperty,eS=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?ex(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class ek{constructor(e,t){this.logger=e,this.markConnectionStateDirty=t,eS(this,"inflightRequests"),eS(this,"requestsOlderThanRestart"),eS(this,"inflightMutationsCount",0),eS(this,"inflightActionsCount",0),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){let r=new Promise(r=>{this.inflightRequests.set(e.requestId,{message:e,status:{status:t?"Requested":"NotSent",requestedAt:new Date,onResult:r}}),"Mutation"===e.type?this.inflightMutationsCount++:"Action"===e.type&&this.inflightActionsCount++});return this.markConnectionStateDirty(),r}onResponse(e){let t,r,n=this.inflightRequests.get(e.requestId);if(void 0===n||"Completed"===n.status.status)return null;let i="Mutation"===n.message.type?"mutation":"action",s=n.message.udfPath;for(let t of e.logLines)ef(this.logger,"info",i,s,t);let o=n.status;if(e.success)t={success:!0,logLines:e.logLines,value:A(e.result)},r=()=>o.onResult(t);else{let n=e.result,{errorData:a}=e;ef(this.logger,"error",i,s,n),t={success:!1,errorMessage:n,errorData:void 0!==a?A(a):void 0,logLines:e.logLines},r=()=>o.onResult(t)}return"ActionResponse"!==e.type&&e.success?(n.status={status:"Completed",result:t,ts:e.ts,onResolve:r},null):(r(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),"Action"===n.message.type?this.inflightActionsCount--:"Mutation"===n.message.type&&this.inflightMutationsCount--,this.markConnectionStateDirty(),{requestId:e.requestId,result:t})}removeCompleted(e){let t=new Map;for(let[r,n]of this.inflightRequests.entries()){let i=n.status;"Completed"===i.status&&i.ts.lessThanOrEqual(e)&&(i.onResolve(),t.set(r,i.result),"Mutation"===n.message.type?this.inflightMutationsCount--:"Action"===n.message.type&&this.inflightActionsCount--,this.inflightRequests.delete(r),this.requestsOlderThanRestart.delete(r))}return t.size>0&&this.markConnectionStateDirty(),t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());let e=[];for(let[t,r]of this.inflightRequests){if("NotSent"===r.status.status){r.status.status="Requested",e.push(r.message);continue}if("Mutation"===r.message.type)e.push(r.message);else if("Action"===r.message.type){if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),this.inflightActionsCount--,"Completed"===r.status.status)throw Error("Action should never be in 'Completed' state");r.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return this.markConnectionStateDirty(),e}resume(){let e=[];for(let[,t]of this.inflightRequests)if("NotSent"===t.status.status){t.status.status="Requested",e.push(t.message);continue}return e}hasIncompleteRequests(){for(let e of this.inflightRequests.values())if("Requested"===e.status.status)return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return 0===this.requestsOlderThanRestart.size}timeOfOldestInflightRequest(){if(0===this.inflightRequests.size)return null;let e=Date.now();for(let t of this.inflightRequests.values())"Completed"!==t.status.status&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}inflightMutations(){return this.inflightMutationsCount}inflightActions(){return this.inflightActionsCount}}let eC=Symbol.for("functionName"),eE=Symbol.for("toReferencePath");function eR(e,t){e[eE]=t}function eT(e){let t;if("string"==typeof e)t=e.startsWith("function://")?{functionHandle:e}:{name:e};else if(e[eC])t={name:e[eC]};else{let r=e[eE]??null;if(!r)throw Error(`${e} is not a functionReference`);t={reference:r}}return t}function eA(e){let t=eT(e);if(void 0===t.name){if(void 0!==t.functionHandle)throw Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${t.functionHandle}`);if(void 0!==t.reference)throw Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${t.reference}`);throw Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(t)}`)}if("string"==typeof e)return e;let r=e[eC];if(!r)throw Error(`${e} is not a functionReference`);return r}function eO(e){return{[eC]:e}}e.s(["getFunctionAddress",()=>eT,"setReferencePath",()=>eR,"toReferencePath",0,eE],100522);let eM=function e(t=[]){return new Proxy({},{get(r,n){if("string"==typeof n)return e([...t,n]);if(n===eC){if(t.length<2){let e=["api",...t].join(".");throw Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${e}\``)}let e=t.slice(0,-1).join("/"),r=t[t.length-1];return"default"===r?e:e+":"+r}return n===Symbol.toStringTag?"FunctionReference":void 0}})}();e.s(["anyApi",0,eM,"getFunctionName",()=>eA,"makeFunctionReference",()=>eO],288588);var eI=Object.defineProperty,eq=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?eI(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class eP{constructor(e){eq(this,"queryResults"),eq(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){let r=m(t[0]),n=eA(e),i=this.queryResults.get(ey(n,r));if(void 0!==i)return eP.queryValue(i.result)}getAllQueries(e){let t=[],r=eA(e);for(let e of this.queryResults.values())e.udfPath===em(r)&&t.push({args:e.args,value:eP.queryValue(e.result)});return t}setQuery(e,t,r){let n=m(t),i=eA(e),s=ey(i,n);this.queryResults.set(s,{udfPath:i,args:n,result:void 0===r?void 0:{success:!0,value:r,logLines:[]}}),this.modifiedQueries.push(s)}static queryValue(e){return void 0===e?void 0:e.success?e.value:void 0}}class eL{constructor(){eq(this,"queryResults"),eq(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(e=>!t.has(e.mutationId));let r=this.queryResults;this.queryResults=new Map(e);let n=new eP(this.queryResults);for(let e of this.optimisticUpdates)e.update(n);let i=[];for(let[e,t]of this.queryResults){let n=r.get(e);(void 0===n||n.result!==t.result)&&i.push(e)}return i}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});let r=new eP(this.queryResults);return e(r),r.modifiedQueries}rawQueryResult(e){return this.queryResults.get(e)}queryResult(e){let t=this.queryResults.get(e);if(void 0===t)return;let r=t.result;if(void 0!==r){if(r.success)return r.value;if(void 0!==r.errorData)throw eg(r,new es(ep("query",t.udfPath,r)));throw Error(ep("query",t.udfPath,r))}}hasQueryResult(e){return void 0!==this.queryResults.get(e)}queryLogs(e){let t=this.queryResults.get(e);return t?.result?.logLines}}var e$=Object.defineProperty,ej=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?e$(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class eN{constructor(e,t){ej(this,"low"),ej(this,"high"),ej(this,"__isUnsignedLong__"),this.low=0|e,this.high=0|t,this.__isUnsignedLong__=!0}static isLong(e){return!0===(e&&e.__isUnsignedLong__)}static fromBytesLE(e){return new eN(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){let e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?eD:e>=e_?eF:new eN(e%eV|0,e/eV|0)}toString(){return(BigInt(this.high)*BigInt(eV)+BigInt(this.low)).toString()}equals(e){return eN.isLong(e)||(e=eN.fromValue(e)),(this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return(eN.isLong(e)||(e=eN.fromValue(e)),this.equals(e))?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return 0>=this.comp(e)}static fromValue(e){return"number"==typeof e?eN.fromNumber(e):new eN(e.low,e.high)}}let eD=new eN(0,0),eV=0x100000000,e_=0xffffffffffffffff,eF=new eN(-1,-1);var eB=Object.defineProperty,eQ=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?eB(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class eU{constructor(e,t){eQ(this,"version"),eQ(this,"remoteQuerySet"),eQ(this,"queryPath"),eQ(this,"logger"),this.version={querySet:0,ts:eN.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=t}transition(e){let t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}:${t.identity}, transitioning from ${this.version.ts.toString()}:${this.version.querySet}:${this.version.identity}`);for(let t of e.modifications)switch(t.type){case"QueryUpdated":{let e=this.queryPath(t.queryId);if(e)for(let r of t.logLines)ef(this.logger,"info","query",e,r);let r=A(t.value??null);this.remoteQuerySet.set(t.queryId,{success:!0,value:r,logLines:t.logLines});break}case"QueryFailed":{let e=this.queryPath(t.queryId);if(e)for(let r of t.logLines)ef(this.logger,"info","query",e,r);let{errorData:r}=t;this.remoteQuerySet.set(t.queryId,{success:!1,errorMessage:t.errorMessage,errorData:void 0!==r?A(r):void 0,logLines:t.logLines});break}case"QueryRemoved":this.remoteQuerySet.delete(t.queryId);break;default:throw Error(`Invalid modification ${t.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function eW(e){let t=et.toByteArray(e);return eN.fromBytesLE(Array.from(t))}function ez(e){switch(e.type){case"FatalError":case"AuthError":case"ActionResponse":case"TransitionChunk":case"Ping":return{...e};case"MutationResponse":if(e.success)return{...e,ts:eW(e.ts)};return{...e};case"Transition":return{...e,startVersion:{...e.startVersion,ts:eW(e.startVersion.ts)},endVersion:{...e.endVersion,ts:eW(e.endVersion.ts)}}}}var eH=Object.defineProperty,eY=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?eH(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};function eJ(){return(void 0===t&&(t=Date.now()),"undefined"!=typeof performance&&performance.now)?Math.round(t+performance.now()):Date.now()}function eK(){return`t=${Math.round((eJ()-t)/100)/10}s`}let eX={InternalServerError:{timeout:1e3},SubscriptionsWorkerFullError:{timeout:3e3},TooManyConcurrentRequests:{timeout:3e3},CommitterFullError:{timeout:3e3},AwsTooManyRequestsException:{timeout:3e3},ExecuteFullError:{timeout:3e3},SystemTimeoutError:{timeout:3e3},ExpiredInQueue:{timeout:3e3},VectorIndexesUnavailable:{timeout:1e3},SearchIndexesUnavailable:{timeout:1e3},TableSummariesUnavailable:{timeout:1e3},VectorIndexTooLarge:{timeout:3e3},SearchIndexTooLarge:{timeout:3e3},TooManyWritesInTimePeriod:{timeout:3e3}};class eG{constructor(e,t,r,n,i,s){this.markConnectionStateDirty=i,this.debug=s,eY(this,"socket"),eY(this,"connectionCount"),eY(this,"_hasEverConnected",!1),eY(this,"lastCloseReason"),eY(this,"transitionChunkBuffer",null),eY(this,"defaultInitialBackoff"),eY(this,"maxBackoff"),eY(this,"retries"),eY(this,"serverInactivityThreshold"),eY(this,"reconnectDueToServerInactivityTimeout"),eY(this,"uri"),eY(this,"onOpen"),eY(this,"onResume"),eY(this,"onMessage"),eY(this,"webSocketConstructor"),eY(this,"logger"),eY(this,"onServerDisconnectError"),this.webSocketConstructor=r,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.defaultInitialBackoff=1e3,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=6e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t.onOpen,this.onResume=t.onResume,this.onMessage=t.onMessage,this.onServerDisconnectError=t.onServerDisconnectError,this.logger=n,this.connect()}setSocketState(e){this.socket=e,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`),this.markConnectionStateDirty()}assembleTransition(e){if(e.partNumber<0||e.partNumber>=e.totalParts||0===e.totalParts||this.transitionChunkBuffer&&(this.transitionChunkBuffer.totalParts!==e.totalParts||this.transitionChunkBuffer.transitionId!==e.transitionId))throw this.transitionChunkBuffer=null,Error("Invalid TransitionChunk");if(null===this.transitionChunkBuffer&&(this.transitionChunkBuffer={chunks:[],totalParts:e.totalParts,transitionId:e.transitionId}),e.partNumber!==this.transitionChunkBuffer.chunks.length){let t=this.transitionChunkBuffer.chunks.length;throw this.transitionChunkBuffer=null,Error(`TransitionChunk received out of order: expected part ${t}, got ${e.partNumber}`)}if(this.transitionChunkBuffer.chunks.push(e.chunk),this.transitionChunkBuffer.chunks.length===e.totalParts){let e=this.transitionChunkBuffer.chunks.join("");this.transitionChunkBuffer=null;let t=ez(JSON.parse(e));if("Transition"!==t.type)throw Error(`Expected Transition, got ${t.type} after assembling chunks`);return t}return null}connect(){if("terminated"===this.socket.state)return;if("disconnected"!==this.socket.state&&"stopped"!==this.socket.state)throw Error("Didn't start connection from disconnected state: "+this.socket.state);let e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:e,paused:"no"}),this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),"connecting"!==this.socket.state)throw Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:e,paused:"yes"===this.socket.paused?"uninitialized":"no"}),this.resetServerInactivityTimeout(),"no"===this.socket.paused&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:eJ()})),"InitialConnect"!==this.lastCloseReason&&(this.lastCloseReason?this.logger.log("WebSocket reconnected at",eK(),"after disconnect due to",this.lastCloseReason):this.logger.log("WebSocket reconnected at",eK())),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=e=>{this.transitionChunkBuffer=null;let t=e.message;t&&this.logger.log(`WebSocket error message: ${t}`)},e.onmessage=e=>{this.resetServerInactivityTimeout();let t=e.data.length,r=ez(JSON.parse(e.data));if(this._logVerbose(`received ws message with type ${r.type}`),"Ping"!==r.type){if("TransitionChunk"===r.type){let e=this.assembleTransition(r);if(!e)return;r=e,this._logVerbose(`assembled full ws message of type ${r.type}`)}null!==this.transitionChunkBuffer&&(this.transitionChunkBuffer=null,this.logger.log(`Received unexpected ${r.type} while buffering TransitionChunks`)),"Transition"===r.type&&this.reportLargeTransition({messageLength:t,transition:r}),this.onMessage(r).hasSyncedPastLastReconnect&&(this.retries=0,this.markConnectionStateDirty())}},e.onclose=e=>{if(this._logVerbose("begin ws.onclose"),this.transitionChunkBuffer=null,null===this.lastCloseReason&&(this.lastCloseReason=e.reason||`closed with code ${e.code}`),1e3!==e.code&&1001!==e.code&&1005!==e.code&&4040!==e.code){let t=`WebSocket closed with code ${e.code}`;e.reason&&(t+=`: ${e.reason}`),this.logger.log(t),this.onServerDisconnectError&&e.reason&&this.onServerDisconnectError(t)}let t=function(e){if(void 0===e)return"Unknown";for(let t of Object.keys(eX))if(e.startsWith(t))return t;return"Unknown"}(e.reason);this.scheduleReconnect(t)}}socketState(){return this.socket.state}sendMessage(e){let t={type:e.type,..."Authenticate"===e.type&&"User"===e.tokenType?{value:`...${e.value.slice(-7)}`}:{}};if("ready"===this.socket.state&&"no"===this.socket.paused){let r=JSON.stringify(function(e){switch(e.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...e};case"Connect":let t;if(void 0===e.maxObservedTimestamp)return{...e,maxObservedTimestamp:void 0};return{...e,maxObservedTimestamp:(t=new Uint8Array(e.maxObservedTimestamp.toBytesLE()),et.fromByteArray(t))}}}(e)),n=!1;try{this.socket.ws.send(r),n=!0}catch(e){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${e}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`${n?"sent":"failed to send"} message with type ${e.type}: ${JSON.stringify(t)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(t)}`),!1}resetServerInactivityTimeout(){"terminated"!==this.socket.state&&(null!==this.reconnectDueToServerInactivityTimeout&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(e){this.socket={state:"disconnected"};let t=this.nextBackoff(e);this.markConnectionStateDirty(),this.logger.log(`Attempting reconnect in ${Math.round(t)}ms`),setTimeout(()=>this.connect(),t)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":this.lastCloseReason=e,this.close(),this.scheduleReconnect("client");return;default:this.socket}}close(){switch(this.transitionChunkBuffer=null,this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{let e=this.socket.ws;return e.onmessage=e=>{this._logVerbose("Ignoring message received after close")},new Promise(t=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),t()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");let e=this.socket.ws;e.onmessage=e=>{this._logVerbose("Ignoring message received after close")};let t=new Promise(t=>{e.onclose=()=>{t()}});return e.close(),t}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{let e=this.close();return this.setSocketState({state:"terminated"}),e}default:throw this.socket,Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{let e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":this.socket={...this.socket,paused:"yes"};return;default:return void this.socket}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":"uninitialized"===this.socket.paused?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:eJ()})):"yes"===this.socket.paused&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:"ready"===this.socket.state,hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(e){let t=("client"===e?100:"Unknown"===e?this.defaultInitialBackoff:eX[e].timeout)*Math.pow(2,this.retries);this.retries+=1;let r=Math.min(t,this.maxBackoff),n=r*(Math.random()-.5);return r+n}reportLargeTransition({transition:e,messageLength:t}){if(void 0===e.clientClockSkew||void 0===e.serverTs)return;let r=eJ()-e.clientClockSkew-e.serverTs/1e6,n=`${Math.round(r)}ms`,i=`${Math.round(t/1e4)/100}MB`,s=t/(r/1e3),o=`${Math.round(s/1e4)/100}MB per second`;this._logVerbose(`received ${i} transition in ${n} at ${o}`),t>2e7?this.logger.log(`received query results totaling more that 20MB (${i}) which will take a long time to download on slower connections`):r>2e4&&this.logger.log(`received query results totaling ${i} which took more than 20s to arrive (${n})`),this.debug&&this.sendMessage({type:"Event",eventType:"ClientReceivedTransition",event:{transitionTransitTime:r,messageLength:t}})}}class eZ extends Error{}function e0(e,t){let r;if("string"!=typeof e)throw new eZ("Invalid token specified: must be a string");t||(t={});let n=+(!0!==t.header),i=e.split(".")[n];if("string"!=typeof i)throw new eZ(`Invalid token specified: missing part #${n+1}`);try{r=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var r;return r=t,decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}catch{return atob(t)}}(i)}catch(e){throw new eZ(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new eZ(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}eZ.prototype.name="InvalidTokenError";var e1=Object.defineProperty,e2=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?e1(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class e5{constructor(e,t,r){e2(this,"authState",{state:"noAuth"}),e2(this,"configVersion",0),e2(this,"syncState"),e2(this,"authenticate"),e2(this,"stopSocket"),e2(this,"tryRestartSocket"),e2(this,"pauseSocket"),e2(this,"resumeSocket"),e2(this,"clearAuth"),e2(this,"logger"),e2(this,"refreshTokenLeewaySeconds"),e2(this,"tokenConfirmationAttempts",0),this.syncState=e,this.authenticate=t.authenticate,this.stopSocket=t.stopSocket,this.tryRestartSocket=t.tryRestartSocket,this.pauseSocket=t.pauseSocket,this.resumeSocket=t.resumeSocket,this.clearAuth=t.clearAuth,this.logger=r.logger,this.refreshTokenLeewaySeconds=r.refreshTokenLeewaySeconds}async setConfig(e,t){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();let r=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});r.isFromOutdatedConfig||(r.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(r.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if("waitingForServerConfirmationOfCachedToken"===this.authState.state){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}"waitingForServerConfirmationOfFreshToken"===this.authState.state&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){if(!1===e.authUpdateAttempted&&("waitingForServerConfirmationOfFreshToken"===this.authState.state||"waitingForServerConfirmationOfCachedToken"===this.authState.state))return void this._logVerbose("ignoring non-auth token expired error");let{baseVersion:t}=e;this.syncState.isCurrentOrNewerAuthVersion(t+1)?this.tryToReauthenticate(e):this._logVerbose("ignoring auth error for previous auth attempt")}async tryToReauthenticate(e){if(this._logVerbose(`attempting to reauthenticate: ${e.error}`),"noAuth"===this.authState.state||"waitingForServerConfirmationOfFreshToken"===this.authState.state&&this.tokenConfirmationAttempts>=2){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),"noAuth"!==this.authState.state&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}"waitingForServerConfirmationOfFreshToken"===this.authState.state&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${2-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();let t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value&&this.syncState.isNewAuth(t.value)?(this.authenticate(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:"notRefetching"===this.authState.state||"waitingForScheduledRefetch"===this.authState.state})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if("noAuth"===this.authState.state)return;this._logVerbose("refetching auth token");let e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(e){if("noAuth"===this.authState.state)return;let t=this.decodeToken(e);if(!t)return void this.logger.error("Auth token is not a valid JWT, cannot refetch the token");let{iat:r,exp:n}=t;if(!r||!n)return void this.logger.error("Auth token does not have required fields, cannot refetch the token");let i=n-r;if(i<=2)return void this.logger.error("Auth token does not live long enough, cannot refetch the token");let s=Math.min(1728e6,(i-this.refreshTokenLeewaySeconds)*1e3);s<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${i}s`),s=0);let o=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},s);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:o,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${s}ms`)}async fetchTokenAndGuardAgainstRace(e,t){let r=++this.configVersion;this._logVerbose(`fetching token with config version ${r}`);let n=await e(t);return this.configVersion!==r?(this._logVerbose(`stale config version, expected ${r}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:n}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){let t="waitingForServerConfirmationOfFreshToken"===e.state?{hadAuth:e.hadAuth,state:e.state,token:`...${e.token.slice(-7)}`}:{state:e.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(t)}`),e.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0}"waitingForScheduledRefetch"===this.authState.state&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return e0(e)}catch(e){return this._logVerbose(`Error decoding token: ${e instanceof Error?e.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}let e3=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function e6(e){let t=e.name.slice(6);return{name:t=t.charAt(0).toLowerCase()+t.slice(1),startTime:e.startTime}}var e4=Object.defineProperty,e7=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?e4(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class e8{constructor(e,t,r){let n;if(e7(this,"address"),e7(this,"state"),e7(this,"requestManager"),e7(this,"webSocketManager"),e7(this,"authenticationManager"),e7(this,"remoteQuerySet"),e7(this,"optimisticQueryResults"),e7(this,"_transitionHandlerCounter",0),e7(this,"_nextRequestId"),e7(this,"_onTransitionFns",new Map),e7(this,"_sessionId"),e7(this,"firstMessageReceived",!1),e7(this,"debug"),e7(this,"logger"),e7(this,"maxObservedTimestamp"),e7(this,"connectionStateSubscribers",new Map),e7(this,"nextConnectionStateSubscriberId",0),e7(this,"_lastPublishedConnectionState"),e7(this,"markConnectionStateDirty",()=>{Promise.resolve().then(()=>{let e=this.connectionState();if(JSON.stringify(e)!==JSON.stringify(this._lastPublishedConnectionState))for(let t of(this._lastPublishedConnectionState=e,this.connectionStateSubscribers.values()))t(e)})}),e7(this,"mark",e=>{var t;this.debug&&(t=this.sessionId,"undefined"!=typeof performance&&performance.mark&&performance.mark(e,{detail:{sessionId:t}}))}),"object"==typeof e)throw Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");r?.skipConvexDeploymentUrlCheck!==!0&&y(e);const i=(r={...r}).authRefreshTokenLeewaySeconds??2;let s=r.webSocketConstructor;if(!s&&"undefined"==typeof WebSocket)throw Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");s=s||WebSocket,this.debug=r.reportDebugInfoToConvex??!1,this.address=e,this.logger=!1===r.logger?new ed({verbose:r.verbose??!1}):!0!==r.logger&&r.logger?r.logger:eh({verbose:r.verbose??!1});const o=e.search("://");if(-1===o)throw Error("Provided address was not an absolute URL.");const a=e.substring(o+3),l=e.substring(0,o);if("http"===l)n="ws";else if("https"===l)n="wss";else throw Error(`Unknown parent protocol ${l}`);const u=`${n}://${a}/api/${ea}/sync`;this.state=new ew,this.remoteQuerySet=new eU(e=>this.state.queryPath(e),this.logger),this.requestManager=new ek(this.logger,this.markConnectionStateDirty);const c=()=>{this.webSocketManager.pause(),this.state.pause()};this.authenticationManager=new e5(this.state,{authenticate:e=>{let t=this.state.setAuth(e);return this.webSocketManager.sendMessage(t),t.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:c,resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:i}),this.optimisticQueryResults=new eL,this.addOnTransitionHandler(e=>{t(e.queries.map(e=>e.token))}),this._nextRequestId=0,this._sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});const{unsavedChangesWarning:d}=r;if("undefined"==typeof window||void 0===window.addEventListener){if(!0===d)throw Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else!1!==d&&window.addEventListener("beforeunload",e=>{if(this.requestManager.hasIncompleteRequests()){e.preventDefault();let t="Are you sure you want to leave? Your changes may not be saved.";return(e||window.event).returnValue=t,t}});this.webSocketManager=new eG(u,{onOpen:e=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...e,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});let t=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new eU(e=>this.state.queryPath(e),this.logger);let[r,n]=this.state.restart(t);for(let e of(n&&this.webSocketManager.sendMessage(n),this.webSocketManager.sendMessage(r),this.requestManager.restart()))this.webSocketManager.sendMessage(e)},onResume:()=>{let[e,t]=this.state.resume();for(let r of(t&&this.webSocketManager.sendMessage(t),e&&this.webSocketManager.sendMessage(e),this.requestManager.resume()))this.webSocketManager.sendMessage(r)},onMessage:e=>{switch(!this.firstMessageReceived&&(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),e.type){case"Transition":{this.observedTimestamp(e.endVersion.ts),this.authenticationManager.onTransition(e),this.remoteQuerySet.transition(e),this.state.transition(e);let t=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(t);break}case"MutationResponse":{e.success&&this.observedTimestamp(e.ts);let t=this.requestManager.onResponse(e);null!==t&&this.notifyOnQueryResultChanges(new Map([[t.requestId,t.result]]));break}case"ActionResponse":this.requestManager.onResponse(e);break;case"AuthError":this.authenticationManager.onAuthError(e);break;case"FatalError":{var t,r;let n,i=(t=this.logger,r=e.error,n=`[CONVEX FATAL ERROR] ${r}`,t.error(n),Error(n));throw this.webSocketManager.terminate(),i}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}},onServerDisconnectError:r.onServerDisconnectError},s,this.logger,this.markConnectionStateDirty,this.debug),this.mark("convexClientConstructed"),r.expectAuth&&c()}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(void 0===this.maxObservedTimestamp||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){let t=this.remoteQuerySet.remoteQueryResults(),r=new Map;for(let[e,n]of t){let t=this.state.queryToken(e);if(null!==t){let i={result:n,udfPath:this.state.queryPath(e),args:this.state.queryArgs(e)};r.set(t,i)}}let n=this.optimisticQueryResults.ingestQueryResultsFromServer(r,new Set(e.keys()));this.handleTransition({queries:n.map(e=>{let t=this.optimisticQueryResults.rawQueryResult(e);return{token:e,modification:{kind:"Updated",result:t.result}}}),reflectedMutations:Array.from(e).map(([e,t])=>({requestId:e,result:t})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(e){for(let t of this._onTransitionFns.values())t(e)}addOnTransitionHandler(e){let t=this._transitionHandlerCounter++;return this._onTransitionFns.set(t,e),()=>this._onTransitionFns.delete(t)}getCurrentAuthClaims(){let e=this.state.getAuth(),t={};if(e&&"User"===e.tokenType){try{t=e?e0(e.value):{}}catch{t={}}return{token:e.value,decoded:t}}}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){let r=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(r)}clearAuth(){let e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,r){let n=m(t),{modification:i,queryToken:s,unsubscribe:o}=this.state.subscribe(e,n,r?.journal,r?.componentPath);return null!==i&&this.webSocketManager.sendMessage(i),{queryToken:s,unsubscribe:()=>{let e=o();e&&this.webSocketManager.sendMessage(e)}}}localQueryResult(e,t){let r=ey(e,m(t));return this.optimisticQueryResults.queryResult(r)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){let r=ey(e,m(t));return this.optimisticQueryResults.queryLogs(r)}queryJournal(e,t){let r=ey(e,m(t));return this.state.queryJournal(r)}connectionState(){let e=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:e.isConnected,hasEverConnected:e.hasEverConnected,connectionCount:e.connectionCount,connectionRetries:e.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest(),inflightMutations:this.requestManager.inflightMutations(),inflightActions:this.requestManager.inflightActions()}}subscribeToConnectionState(e){let t=this.nextConnectionStateSubscriberId++;return this.connectionStateSubscribers.set(t,e),()=>{this.connectionStateSubscribers.delete(t)}}async mutation(e,t,r){let n=await this.mutationInternal(e,t,r);if(!n.success){if(void 0!==n.errorData)throw eg(n,new es(ep("mutation",e,n)));throw Error(ep("mutation",e,n))}return n.value}async mutationInternal(e,t,r,n){let{mutationPromise:i}=this.enqueueMutation(e,t,r,n);return i}enqueueMutation(e,t,r,n){let i=m(t);this.tryReportLongDisconnect();let s=this.nextRequestId;if(this._nextRequestId++,void 0!==r){let e=r.optimisticUpdate;if(void 0!==e){let t=t=>{e(t,i)instanceof Promise&&this.logger.warn("Optimistic update handler returned a Promise. Optimistic updates should be synchronous.")},r=this.optimisticQueryResults.applyOptimisticUpdate(t,s).map(e=>{let t=this.localQueryResultByToken(e);return{token:e,modification:{kind:"Updated",result:void 0===t?void 0:{success:!0,value:t,logLines:[]}}}});this.handleTransition({queries:r,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}let o={type:"Mutation",requestId:s,udfPath:e,componentPath:n,args:[P(i)]},a=this.webSocketManager.sendMessage(o);return{requestId:s,mutationPromise:this.requestManager.request(o,a)}}async action(e,t){let r=await this.actionInternal(e,t);if(!r.success){if(void 0!==r.errorData)throw eg(r,new es(ep("action",e,r)));throw Error(ep("action",e,r))}return r.value}async actionInternal(e,t,r){let n=m(t),i=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();let s={type:"Action",requestId:i,udfPath:e,componentPath:r,args:[P(n)]},o=this.webSocketManager.sendMessage(s);return this.requestManager.request(s,o)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){let e=function(e){if("undefined"==typeof performance||!performance.getEntriesByName)return[];let t=[];for(let r of e3){let n=performance.getEntriesByName(r).filter(e=>"mark"===e.entryType).filter(t=>t.detail.sessionId===e);t.push(...n)}return t.map(e6)}(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;let e=this.connectionState().timeOfOldestInflightRequest;null===e||Date.now()-e.getTime()<=6e4||fetch(`${this.address}/api/debug_event`,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${ea}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(e=>{e.ok||this.logger.warn("Analytics request failed with response:",e.body)}).catch(e=>{this.logger.warn("Analytics response failed with error:",e)})}}var e9=Object.defineProperty,te=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?e9(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};if(void 0===i.default)throw Error("Required dependency 'react' not found");class tt{constructor(e,t){if(te(this,"address"),te(this,"cachedSync"),te(this,"listeners"),te(this,"options"),te(this,"closed",!1),te(this,"_logger"),te(this,"adminAuth"),te(this,"fakeUserIdentity"),void 0===e)throw Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if("string"!=typeof e)throw Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=t?.logger===!1?new ed({verbose:t?.verbose??!1}):t?.logger!==!0&&t?.logger?t.logger:eh({verbose:t?.verbose??!1}),this.options={...t,logger:this._logger}}get url(){return this.address}get sync(){if(this.closed)throw Error("ConvexReactClient has already been closed.");return this.cachedSync||(this.cachedSync=new e8(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity)),this.cachedSync}setAuth(e,t){if("string"==typeof e)throw Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,t??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,t){if(this.adminAuth=e,this.fakeUserIdentity=t,this.closed)throw Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,t)}watchQuery(e,...t){let[r,n]=t,i=eA(e);return{onUpdate:e=>{let{queryToken:t,unsubscribe:s}=this.sync.subscribe(i,r,n),o=this.listeners.get(t);return void 0!==o?o.add(e):this.listeners.set(t,new Set([e])),()=>{if(this.closed)return;let r=this.listeners.get(t);r.delete(e),0===r.size&&this.listeners.delete(t),s()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(i,r)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(i,r)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(i,r)}}}prewarmQuery(e){let t=e.extendSubscriptionFor??5e3;setTimeout(this.watchQuery(e.query,e.args||{}).onUpdate(()=>{}),t)}mutation(e,...t){let[r,n]=t,i=eA(e);return this.sync.mutation(i,r,n)}action(e,...t){let r=eA(e);return this.sync.action(r,...t)}query(e,...t){let r=this.watchQuery(e,...t),n=r.localQueryResult();return void 0!==n?Promise.resolve(n):new Promise((e,t)=>{let n=r.onUpdate(()=>{n();try{e(r.localQueryResult())}catch(e){t(e)}})})}connectionState(){return this.sync.connectionState()}subscribeToConnectionState(e){return this.sync.subscribeToConnectionState(e)}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){let e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){for(let t of e){let e=this.listeners.get(t);if(e)for(let t of e)t()}}}let tr=i.default.createContext(void 0);function tn(){return(0,i.useContext)(tr)}let ti=({client:e,children:t})=>i.default.createElement(tr.Provider,{value:e},t);function ts(e,...t){let r="skip"===t[0],n="skip"===t[0]?{}:m(t[0]),s="string"==typeof e?eO(e):e,o=eA(s),a=td((0,i.useMemo)(()=>r?{}:{query:{query:s,args:n}},[JSON.stringify(P(n)),o,r])).query;if(a instanceof Error)throw a;return a}function to(e){let t="string"==typeof e?eO(e):e,r=(0,i.useContext)(tr);if(void 0===r)throw Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return(0,i.useMemo)(()=>(function e(t,r,n){function i(e){return function(e){if("object"==typeof e&&null!==e&&"bubbles"in e&&"persist"in e&&"isDefaultPrevented"in e)throw Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}(e),r.mutation(t,e,{optimisticUpdate:n})}return i.withOptimisticUpdate=function(i){if(void 0!==n)throw Error(`Already specified optimistic update for mutation ${eA(t)}`);return e(t,r,i)},i})(t,r),[r,eA(t)])}function ta(e){let t=(0,i.useContext)(tr),r="string"==typeof e?eO(e):e;if(void 0===t)throw Error("Could not find Convex client! `useAction` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return(0,i.useMemo)(()=>function(e){return t.action(r,e)},[t,eA(r)])}var tl=Object.defineProperty,tu=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?tl(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class tc{constructor(e){tu(this,"createWatch"),tu(this,"queries"),tu(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(let t of Object.keys(e)){let{query:r,args:n}=e[t];if(eA(r),void 0===this.queries[t])this.addQuery(t,r,n);else{let e=this.queries[t];(eA(r)!==eA(e.query)||JSON.stringify(P(n))!==JSON.stringify(P(e.args)))&&(this.removeQuery(t),this.addQuery(t,r,n))}}for(let t of Object.keys(this.queries))void 0===e[t]&&this.removeQuery(t)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){let t={};for(let r of Object.keys(e)){let n,{query:i,args:s}=e[r];eA(i);let o=this.createWatch(i,s);try{n=o.localQueryResult()}catch(e){if(e instanceof Error)n=e;else throw e}t[r]=n}return t}setCreateWatch(e){for(let t of(this.createWatch=e,Object.keys(this.queries))){let{query:e,args:r,watch:n}=this.queries[t],i=n.journal();this.removeQuery(t),this.addQuery(t,e,r,i)}}destroy(){for(let e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,t,r,n){if(void 0!==this.queries[e])throw Error(`Tried to add a new query with identifier ${e} when it already exists.`);let i=this.createWatch(t,r,n),s=i.onUpdate(()=>this.notifyListeners());this.queries[e]={query:t,args:r,watch:i,unsubscribe:s}}removeQuery(e){let t=this.queries[e];if(void 0===t)throw Error(`No query found with identifier ${e}.`);t.unsubscribe(),delete this.queries[e]}notifyListeners(){for(let e of this.listeners)e()}}function td(e){let t=tn();if(void 0===t)throw Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return function(e,t){let[r]=(0,i.useState)(()=>new tc(t));return r.createWatch!==t&&r.setCreateWatch(t),(0,i.useEffect)(()=>()=>r.destroy(),[r]),function({getCurrentValue:e,subscribe:t}){let[r,n]=(0,i.useState)(()=>({getCurrentValue:e,subscribe:t,value:e()})),s=r.value;return(r.getCurrentValue!==e||r.subscribe!==t)&&(s=e(),n({getCurrentValue:e,subscribe:t,value:s})),(0,i.useEffect)(()=>{let r=!1,i=()=>{r||n(r=>{if(r.getCurrentValue!==e||r.subscribe!==t)return r;let n=e();return r.value===n?r:{...r,value:n}})},s=t(i);return i(),()=>{r=!0,s()}},[e,t]),s}((0,i.useMemo)(()=>({getCurrentValue:()=>r.getLocalResults(e),subscribe:t=>(r.setQueries(e),r.subscribe(t))}),[r,e]))}(e,(0,i.useMemo)(()=>(e,r,n)=>t.watchQuery(e,r,n?{journal:n}:{}),[t]))}let th=(e,t,r)=>n=>{let i={...n.queries},s=n.nextPageKey,o=n.nextPageKey+1,a=n.nextPageKey+2;i[s]={query:n.query,args:{...n.args,paginationOpts:{...n.queries[e].args.paginationOpts,endCursor:t}}},i[o]={query:n.query,args:{...n.args,paginationOpts:{...n.queries[e].args.paginationOpts,cursor:t,endCursor:r}}};let l={...n.ongoingSplits};return l[e]=[s,o],{...n,nextPageKey:a,queries:i,ongoingSplits:l}},tf=e=>t=>{let r=t.ongoingSplits[e];if(void 0===r)return t;let n={...t.queries};delete n[e];let i={...t.ongoingSplits};delete i[e];let s=t.pageKeys.slice(),o=t.pageKeys.findIndex(t=>t===e);return o>=0&&(s=[...t.pageKeys.slice(0,o),...r,...t.pageKeys.slice(o+1)]),{...t,queries:n,pageKeys:s,ongoingSplits:i}};function tp(e,t,r){let{user:n}=function(e,t,r){if("number"!=typeof r?.initialNumItems||r.initialNumItems<0)throw Error(`\`options.initialNumItems\` must be a positive number. Received \`${r?.initialNumItems}\`.`);let n="skip"===t,s=n?{}:t,o=eA(e),a=(0,i.useMemo)(()=>()=>{let t=++ty;return{query:e,args:s,id:t,nextPageKey:1,pageKeys:n?[]:[0],queries:n?{}:{0:{query:e,args:{...s,paginationOpts:{numItems:r.initialNumItems,cursor:null,id:t}}}},ongoingSplits:{},skip:n}},[JSON.stringify(P(s)),o,r.initialNumItems,n]),[l,u]=(0,i.useState)(a),c=l;(eA(e)!==eA(l.query)||JSON.stringify(P(s))!==JSON.stringify(P(l.args))||n!==l.skip)&&u(c=a());let d=tn().logger,h=td(c.queries),f=r[tg]??!1,[p,g]=(0,i.useMemo)(()=>{let e,t=[];for(let n of c.pageKeys){if(void 0===(e=h[n]))break;if(e instanceof Error)if(e.message.includes("InvalidCursor")||e instanceof es&&"object"==typeof e.data&&e.data?.isConvexSystemError===!0&&e.data?.paginationError==="InvalidCursor")return d.warn("usePaginatedQuery hit error, resetting pagination state: "+e.message),u(a),[[],void 0];else throw e;let i=c.ongoingSplits[n];if(void 0!==i?void 0!==h[i[0]]&&void 0!==h[i[1]]&&u(tf(n)):e.splitCursor&&("SplitRecommended"===e.pageStatus||"SplitRequired"===e.pageStatus||e.page.length>2*r.initialNumItems)&&u(th(n,e.splitCursor,e.continueCursor)),"SplitRequired"===e.pageStatus)return[t,void 0];t.push(...f?e.page.map(e=>({...e,[tm]:n.toString()})):e.page)}return[t,e]},[h,c.pageKeys,c.ongoingSplits,r.initialNumItems,a,d,f]);return{user:{results:p,...(0,i.useMemo)(()=>{if(void 0===g)if(1===c.nextPageKey)return{status:"LoadingFirstPage",isLoading:!0,loadMore:e=>{}};else return{status:"LoadingMore",isLoading:!0,loadMore:e=>{}};if(g.isDone)return{status:"Exhausted",isLoading:!1,loadMore:e=>{}};let e=g.continueCursor,t=!1;return{status:"CanLoadMore",isLoading:!1,loadMore:r=>{t||(t=!0,u(t=>{let n=[...t.pageKeys,t.nextPageKey],i={...t.queries};return i[t.nextPageKey]={query:t.query,args:{...t.args,paginationOpts:{numItems:r,cursor:e,id:t.id}}},{...t,nextPageKey:t.nextPageKey+1,pageKeys:n,queries:i}}))}}},[g,c.nextPageKey])},internal:{state:c}}}(e,t,r);return n}let tg=Symbol("includePageKeys"),tm=Symbol("page"),ty=0;e.s(["usePaginatedQuery",()=>tp],599632);let tv=(0,i.createContext)(void 0);function tb(){let e=(0,i.useContext)(tv);if(void 0===e)throw Error("Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.");return e}function tw({children:e,client:t,useAuth:r}){let{isLoading:n,isAuthenticated:s,fetchAccessToken:o}=r(),[a,l]=(0,i.useState)(null);return n&&null!==a&&l(null),n||s||!1===a||l(!1),i.default.createElement(tv.Provider,{value:{isLoading:null===a,isAuthenticated:s&&(a??!1)}},i.default.createElement(tx,{authProviderAuthenticated:s,fetchAccessToken:o,authProviderLoading:n,client:t,setIsConvexAuthenticated:l}),i.default.createElement(ti,{client:t},e),i.default.createElement(tS,{authProviderAuthenticated:s,fetchAccessToken:o,authProviderLoading:n,client:t,setIsConvexAuthenticated:l}))}function tx({authProviderAuthenticated:e,fetchAccessToken:t,authProviderLoading:r,client:n,setIsConvexAuthenticated:s}){return(0,i.useEffect)(()=>{let r=!0;if(e)return n.setAuth(t,e=>{r&&s(()=>e)}),()=>{r=!1,s(e=>!e&&null)}},[e,t,r,n,s]),null}function tS({authProviderAuthenticated:e,fetchAccessToken:t,authProviderLoading:r,client:n,setIsConvexAuthenticated:s}){return(0,i.useEffect)(()=>{if(e)return()=>{n.clearAuth(),s(()=>null)}},[e,t,r,n,s]),null}function tk({children:e}){let{isLoading:t,isAuthenticated:r}=tb();return t||!r?null:i.default.createElement(i.default.Fragment,null,e)}function tC({children:e}){let{isLoading:t,isAuthenticated:r}=tb();return t||r?null:i.default.createElement(i.default.Fragment,null,e)}function tE({children:e}){let{isLoading:t}=tb();return t?i.default.createElement(i.default.Fragment,null,e):null}e.s(["ConvexProviderWithAuth",()=>tw,"useConvexAuth",()=>tb],425239),e.s(["AuthLoading",()=>tE,"Authenticated",()=>tk,"Unauthenticated",()=>tC],228189),e.s([],511655)},192512,883394,934321,334862,627897,e=>{"use strict";let t;var r=e.i(50897),n=e.i(266431),i=e.i(426735);e.i(511655);var s=e.i(80181);e.i(489033);var o=e.i(170367),a=e.i(445589),l=e.i(670549),u=e.i(916362);function c(e,t){if("undefined"==typeof Convex||void 0===Convex.syscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");return JSON.parse(Convex.syscall(e,JSON.stringify(t)))}async function d(e,t){let r;if("undefined"==typeof Convex||void 0===Convex.asyncSyscall)throw Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");try{r=await Convex.asyncSyscall(e,JSON.stringify(t))}catch(e){if(void 0!==e.data){let t=new u.ConvexError(e.message);throw t.data=(0,o.jsonToConvex)(e.data),t}throw Error(e.message)}return JSON.parse(r)}e.i(803169);var h=e.i(100522);function f(e,t,r,n){if(void 0===e)throw TypeError(`Must provide arg ${t} \`${n}\` to \`${r}\``)}var p=Object.defineProperty,g=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?p(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class m{constructor(){g(this,"_isExpression"),g(this,"_value")}}var y=Object.defineProperty;class v extends m{constructor(e){super(),((e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r})(this,"inner"),this.inner=e}serialize(){return this.inner}}function b(e){return e instanceof v?e.serialize():{$literal:(0,o.convexOrUndefinedToJson)(e)}}let w={eq:(e,t)=>new v({$eq:[b(e),b(t)]}),neq:(e,t)=>new v({$neq:[b(e),b(t)]}),lt:(e,t)=>new v({$lt:[b(e),b(t)]}),lte:(e,t)=>new v({$lte:[b(e),b(t)]}),gt:(e,t)=>new v({$gt:[b(e),b(t)]}),gte:(e,t)=>new v({$gte:[b(e),b(t)]}),add:(e,t)=>new v({$add:[b(e),b(t)]}),sub:(e,t)=>new v({$sub:[b(e),b(t)]}),mul:(e,t)=>new v({$mul:[b(e),b(t)]}),div:(e,t)=>new v({$div:[b(e),b(t)]}),mod:(e,t)=>new v({$mod:[b(e),b(t)]}),neg:e=>new v({$neg:b(e)}),and:(...e)=>new v({$and:e.map(b)}),or:(...e)=>new v({$or:e.map(b)}),not:e=>new v({$not:b(e)}),field:e=>new v({$field:e})};var x=Object.defineProperty,S=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?x(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};function k(e){throw Error("consumed"===e?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}class C{constructor(e){S(this,"state"),S(this,"tableNameForErrorMessages"),this.state={type:"preparing",query:e},"FullTableScan"===e.source.type?this.tableNameForErrorMessages=e.source.tableName:this.tableNameForErrorMessages=e.source.indexName.split(".")[0]}takeQuery(){if("preparing"!==this.state.type)throw Error("A query can only be chained once and can't be chained after iteration begins.");let e=this.state.query;return this.state={type:"closed"},e}startQuery(){if("executing"===this.state.type)throw Error("Iteration can only begin on a query once.");("closed"===this.state.type||"consumed"===this.state.type)&&k(this.state.type);let{queryId:e}=c("1.0/queryStream",{query:this.state.query,version:l.version});return this.state={type:"executing",queryId:e},e}closeQuery(){"executing"===this.state.type&&c("1.0/queryCleanup",{queryId:this.state.queryId}),this.state={type:"consumed"}}order(e){f(e,1,"order","order");let t=this.takeQuery();if("Search"===t.source.type)throw Error("Search queries must always be in relevance order. Can not set order manually.");if(null!==t.source.order)throw Error("Queries may only specify order at most once");return t.source.order=e,new C(t)}filter(e){f(e,1,"filter","predicate");let t=this.takeQuery();if(t.operators.length>=256)throw Error("Can't construct query with more than 256 operators");return t.operators.push({filter:b(e(w))}),new C(t)}limit(e){f(e,1,"limit","n");let t=this.takeQuery();return t.operators.push({limit:e}),new C(t)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){("closed"===this.state.type||"consumed"===this.state.type)&&k(this.state.type);let e="preparing"===this.state.type?this.startQuery():this.state.queryId,{value:t,done:r}=await d("1.0/queryStreamNext",{queryId:e});return r&&this.closeQuery(),{value:(0,o.jsonToConvex)(t),done:r}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(e){if(f(e,1,"paginate","options"),"number"!=typeof e?.numItems||e.numItems<0)throw Error(`\`options.numItems\` must be a positive number. Received \`${e?.numItems}\`.`);let t=this.takeQuery(),r=e.numItems,n=e.cursor,i=e?.endCursor??null,s=e.maximumRowsRead??null,{page:a,isDone:u,continueCursor:c,splitCursor:h,pageStatus:p}=await d("1.0/queryPage",{query:t,cursor:n,endCursor:i,pageSize:r,maximumRowsRead:s,maximumBytesRead:e.maximumBytesRead,version:l.version});return{page:a.map(e=>(0,o.jsonToConvex)(e)),isDone:u,continueCursor:c,splitCursor:h,pageStatus:p}}async collect(){let e=[];for await(let t of this)e.push(t);return e}async take(e){f(e,1,"take","n");if(!Number.isInteger(e)||e<0)throw TypeError("Arg 1 `n` to `take` must be a non-negative integer");return this.limit(e).collect()}async first(){let e=await this.take(1);return 0===e.length?null:e[0]}async unique(){let e=await this.take(2);if(0===e.length)return null;if(2===e.length)throw Error(`unique() query returned more than one result from table ${this.tableNameForErrorMessages}:
 [${e[0]._id}, ${e[1]._id}, ...]`);return e[0]}}a.v.object({numItems:a.v.number(),cursor:a.v.union(a.v.string(),a.v.null()),endCursor:a.v.optional(a.v.union(a.v.string(),a.v.null())),id:a.v.optional(a.v.number()),maximumRowsRead:a.v.optional(a.v.number()),maximumBytesRead:a.v.optional(a.v.number())});var E=e.i(288588),R=Object.defineProperty,T=Object.defineProperty,A=(e,t,r)=>{let n;return(n="symbol"!=typeof t?t+"":t)in e?T(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r};class O{constructor(e){A(this,"indexes"),A(this,"stagedDbIndexes"),A(this,"searchIndexes"),A(this,"stagedSearchIndexes"),A(this,"vectorIndexes"),A(this,"stagedVectorIndexes"),A(this,"validator"),this.indexes=[],this.stagedDbIndexes=[],this.searchIndexes=[],this.stagedSearchIndexes=[],this.vectorIndexes=[],this.stagedVectorIndexes=[],this.validator=e}" indexes"(){return this.indexes}index(e,t){return Array.isArray(t)?this.indexes.push({indexDescriptor:e,fields:t}):t.staged?this.stagedDbIndexes.push({indexDescriptor:e,fields:t.fields}):this.indexes.push({indexDescriptor:e,fields:t.fields}),this}searchIndex(e,t){return t.staged?this.stagedSearchIndexes.push({indexDescriptor:e,searchField:t.searchField,filterFields:t.filterFields||[]}):this.searchIndexes.push({indexDescriptor:e,searchField:t.searchField,filterFields:t.filterFields||[]}),this}vectorIndex(e,t){return t.staged?this.stagedVectorIndexes.push({indexDescriptor:e,vectorField:t.vectorField,dimensions:t.dimensions,filterFields:t.filterFields||[]}):this.vectorIndexes.push({indexDescriptor:e,vectorField:t.vectorField,dimensions:t.dimensions,filterFields:t.filterFields||[]}),this}self(){return this}export(){let e=this.validator.json;if("object"!=typeof e)throw Error("Invalid validator: please make sure that the parameter of `defineTable` is valid (see https://docs.convex.dev/database/schemas)");return{indexes:this.indexes,stagedDbIndexes:this.stagedDbIndexes,searchIndexes:this.searchIndexes,stagedSearchIndexes:this.stagedSearchIndexes,vectorIndexes:this.vectorIndexes,stagedVectorIndexes:this.stagedVectorIndexes,documentType:e}}}function M(e){return new O((0,a.isValidator)(e)?e:a.v.object(e))}new class e{constructor(e,t){A(this,"tables"),A(this,"strictTableNameTypes"),A(this,"schemaValidation"),this.tables=e,this.schemaValidation=t?.schemaValidation===void 0||t.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([e,t])=>{let{indexes:r,stagedDbIndexes:n,searchIndexes:i,stagedSearchIndexes:s,vectorIndexes:o,stagedVectorIndexes:a,documentType:l}=t.export();return{tableName:e,indexes:r,stagedDbIndexes:n,searchIndexes:i,stagedSearchIndexes:s,vectorIndexes:o,stagedVectorIndexes:a,documentType:l}}),schemaValidation:this.schemaValidation})}}({_scheduled_functions:M({name:a.v.string(),args:a.v.array(a.v.any()),scheduledTime:a.v.float64(),completedTime:a.v.optional(a.v.float64()),state:a.v.union(a.v.object({kind:a.v.literal("pending")}),a.v.object({kind:a.v.literal("inProgress")}),a.v.object({kind:a.v.literal("success")}),a.v.object({kind:a.v.literal("failed"),error:a.v.string()}),a.v.object({kind:a.v.literal("canceled")}))}),_storage:M({sha256:a.v.string(),size:a.v.float64(),contentType:a.v.optional(a.v.string())})},void 0);let I=E.anyApi;E.anyApi,function e(t,r){return new Proxy({},{get(n,i){if("string"==typeof i)return e(t,[...r,i]);if(i===h.toReferencePath){if(r.length<1){let e=[t,...r].join(".");throw Error(`API path is expected to be of the form \`${t}.childComponent.functionName\`. Found: \`${e}\``)}return"_reference/childComponent/"+r.join("/")}}})}("components",[]),e.s(["api",0,I],883394);let q=(e,t)=>{let r=!1,n=[...e];for(let e of t){let t=n.findIndex(t=>t.id===e.id);if(t>=0){let i=n[t],s={...i,content:void 0!==e.content?e.content:i.content,status:void 0!==e.status?e.status:i.status,sourceMessageId:void 0!==e.sourceMessageId?e.sourceMessageId:i.sourceMessageId};(i.content!==s.content||i.status!==s.status||i.sourceMessageId!==s.sourceMessageId)&&(n[t]=s,r=!0)}else P(e)&&(n.push(e),r=!0)}return r?n:e},P=e=>void 0!==e.content&&void 0!==e.status,L=(e,t,r)=>{let n=e.filter(e=>!e.sourceMessageId);return[...r?t.map(e=>({...e,sourceMessageId:r})):t,...n]};e.s(["computeReplaceAssistantTodos",0,L,"getTodoStats",0,e=>{let t=e.filter(e=>"completed"===e.status).length,r=e.filter(e=>"in_progress"===e.status).length,n=e.filter(e=>"pending"===e.status).length,i=e.filter(e=>"cancelled"===e.status).length;return{completed:t,inProgress:r,pending:n,cancelled:i,total:e.length,done:t+i}},"mergeTodos",0,q,"removeTodosBySourceMessages",0,(e,t)=>{if(0===t.length)return e;let r=new Set(t);return e.filter(e=>!e.sourceMessageId||!r.has(e.sourceMessageId))},"shouldTreatAsMerge",0,(e,t)=>!!e||!!Array.isArray(t)&&t.some(e=>void 0===e.content||void 0===e.status)],934321);var $=e.i(30593);let j={CHAT_SIDEBAR:"chatSidebarOpen",MAIN_SIDEBAR:"sidebar_state"},N=e=>({get:t=>((e,t=j.CHAT_SIDEBAR)=>{if(e)return!1;try{let e=localStorage.getItem(t);return!!e&&JSON.parse(e)}catch{return!1}})(t,e),save:(t,r)=>((e,t,r=j.CHAT_SIDEBAR)=>{if(!t)try{localStorage.setItem(r,JSON.stringify(e))}catch{}})(t,r,e),clear:()=>((e=j.CHAT_SIDEBAR)=>{try{localStorage.removeItem(e)}catch{}})(e)}),D=N(j.CHAT_SIDEBAR),V=N(j.MAIN_SIDEBAR);e.s(["STORAGE_KEYS",0,j,"chatSidebarStorage",0,D,"mainSidebarStorage",0,V],334862);let _="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),F=new Uint8Array(16),B=[];for(let e=0;e<256;++e)B.push((e+256).toString(16).slice(1));let Q=function(e,r,n){if(_&&!r&&!e)return _();var i=e,s=n;let o=(i=i||{}).random??i.rng?.()??function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(F)}();if(o.length<16)throw Error("Random bytes length must be >= 16");if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){if((s=s||0)<0||s+16>r.length)throw RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let e=0;e<16;++e)r[s+e]=o[e];return r}return function(e,t=0){return(B[e[t+0]]+B[e[t+1]]+B[e[t+2]]+B[e[t+3]]+"-"+B[e[t+4]]+B[e[t+5]]+"-"+B[e[t+6]]+B[e[t+7]]+"-"+B[e[t+8]]+B[e[t+9]]+"-"+B[e[t+10]]+B[e[t+11]]+B[e[t+12]]+B[e[t+13]]+B[e[t+14]]+B[e[t+15]]).toLowerCase()}(o)};e.s(["v4",0,Q],627897);var U=e.i(779342),W=e.i(730592);let z=(0,n.createContext)(void 0);e.s(["GlobalStateProvider",0,({children:t})=>{let{user:o,entitlements:a}=(0,i.useAuth)(),l=(0,$.useIsMobile)(),u=(0,n.useRef)(l),[c,d]=(0,n.useState)(""),[h,f]=(0,n.useState)([]),[p,g]=(0,n.useState)(()=>{let e=(0,W.readChatMode)();return"ask"===e||"agent"===e?e:"ask"}),[m,y]=(0,n.useState)(null),[v,b]=(0,n.useState)(null),[w,x]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),[C,E]=(0,n.useState)(null);(0,n.useEffect)(()=>{(0,W.writeChatMode)(p)},[p]);let[R,T]=(0,n.useState)(()=>D.get(l)),[A,O]=(0,n.useState)([]),[M,P]=(0,n.useState)(!1),j=(0,n.useCallback)(e=>{O(t=>q(t,e))},[]),N=(0,n.useCallback)((e,t)=>{O(r=>L(r,e,t))},[]),[V,_]=(0,n.useState)([]),[F,B]=(0,n.useState)("free"),[H,Y]=(0,n.useState)(!1),J=(0,n.useRef)(null),[K,X]=(0,n.useState)(!1),[G,Z]=(0,n.useState)([]),[ee,et]=(0,n.useState)(()=>{let e=localStorage.getItem("queue-behavior");return"queue"===e||"stop-and-send"===e?e:"queue"}),[er,en]=(0,n.useState)(()=>localStorage.getItem("sandbox-preference")||"e2b");(0,n.useEffect)(()=>{localStorage.setItem("queue-behavior",ee)},[ee]),(0,n.useEffect)(()=>{localStorage.setItem("sandbox-preference",er)},[er]);let[ei,es]=(0,n.useState)(()=>"true"===new URLSearchParams(window.location.search).get("temporary-chat")),[eo,ea]=(0,n.useState)(()=>"#team-pricing-seat-selection"===window.location.hash),[el,eu]=(0,n.useState)(()=>"true"===new URLSearchParams(window.location.search).get("team-welcome")),[ec,ed]=(0,n.useState)(()=>"true"===new URLSearchParams(window.location.search).get("confirm-migrate-pentestgpt"));(0,n.useEffect)(()=>{D.save(R,l),!u.current&&l&&R&&T(!1),u.current=l},[R,l]),(0,n.useEffect)(()=>{(0,W.cleanupExpiredDrafts)()},[]),(0,n.useEffect)(()=>{if(!o)return void B("free");if(Array.isArray(a)){let e=a.includes("ultra-plan")||a.includes("ultra-monthly-plan")||a.includes("ultra-yearly-plan"),t=a.includes("team-plan"),r=a.includes("pro-plan")||a.includes("pro-monthly-plan")||a.includes("pro-yearly-plan");B(e?"ultra":t?"team":r?"pro":"free")}},[o,a]);let eh=(0,s.useMutation)(I.aggregateMigrations.ensureUserAggregatesMigrated),ef=(0,n.useRef)(!1),ep=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=o?.id??null;ep.current!==e&&(ef.current=!1,ep.current=e),o&&!ef.current&&(ef.current=!0,eh().catch(e=>{console.error("Failed to migrate user aggregates:",e)}))},[o,eh]),(0,n.useEffect)(()=>{(async()=>{if(!o){B("free"),Y(!1);return}let t=new URL(window.location.href);if("entitlements"===t.searchParams.get("refresh")){Y(!0);try{let t=new AbortController,r=setTimeout(()=>t.abort(),1e4),n=await fetch("/api/entitlements",{credentials:"include",signal:t.signal});if(clearTimeout(r),n.ok){let e=(await n.json()).subscription;B("ultra"===e||"team"===e||"pro"===e?e:"free")}else{if(401===n.status){let{clientLogout:t}=await e.A(346978);t();return}B("free")}}catch{B("free")}finally{Y(!1),t.searchParams.delete("refresh"),window.history.replaceState({},"",t.toString())}}})()},[o]),(0,n.useEffect)(()=>{let e=()=>{let e="true"===new URLSearchParams(window.location.search).get("temporary-chat");ei!==e&&es(e)};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[ei]),(0,n.useEffect)(()=>{let e=()=>{let e="#team-pricing-seat-selection"===window.location.hash;eo!==e&&ea(e)};return window.addEventListener("hashchange",e),window.addEventListener("popstate",e),()=>{window.removeEventListener("hashchange",e),window.removeEventListener("popstate",e)}},[eo]),(0,n.useEffect)(()=>{let e=()=>{let e="true"===new URLSearchParams(window.location.search).get("team-welcome");el!==e&&eu(e)};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[el]),(0,n.useEffect)(()=>{let e=()=>{let e="true"===new URLSearchParams(window.location.search).get("confirm-migrate-pentestgpt");ec!==e&&ed(e)};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[ec]);let eg=(0,n.useCallback)(()=>h.reduce((e,t)=>t.tokens?e+t.tokens:e,0),[h]),em=h.some(e=>e.uploading||e.error),ey=(0,n.useCallback)(e=>{f(t=>[...t,e])},[]),ev=(0,n.useCallback)(e=>{f(t=>t.filter((t,r)=>r!==e))},[]),eb=(0,n.useCallback)((e,t)=>{f(r=>r.map((r,n)=>n===e?{...r,...t}:r))},[]),ew=(0,n.useCallback)((e,t)=>{Z(r=>r.length>=10?(U.toast.error("Queue is full",{description:"Please wait for queued messages to send before adding more."}),r):[...r,{id:Q(),text:e,files:t,timestamp:Date.now()}])},[]),ex=(0,n.useCallback)(e=>{Z(t=>t.filter(t=>t.id!==e))},[]),eS=(0,n.useCallback)(()=>{Z([])},[]),ek=(0,n.useCallback)(()=>{let e=null;return Z(t=>0===t.length?t:(e=t[0],t.slice(1))),e},[]),eC=(0,n.useCallback)((e,t)=>{x(!0),b(e),O([]),P(!1)},[]),eE=(0,n.useCallback)(()=>{J.current&&J.current(),b(null),O([]),P(!1),y(null)},[]),eR=(0,n.useCallback)(e=>{J.current=e},[]),eT=(0,n.useCallback)(e=>{b(e)},[]),eA=(0,n.useCallback)(e=>{es(e);{let t=new URL(window.location.href);e?t.searchParams.set("temporary-chat","true"):t.searchParams.delete("temporary-chat"),window.history.replaceState({},"",t.toString())}},[]),eO=(0,n.useCallback)(e=>{eu(e);{let t=new URL(window.location.href);e||(t.searchParams.delete("team-welcome"),window.history.replaceState({},"",t.toString()))}},[]),eM=(0,n.useCallback)(e=>{ed(e);{let t=new URL(window.location.href);e?t.searchParams.set("confirm-migrate-pentestgpt","true"):t.searchParams.delete("confirm-migrate-pentestgpt"),window.history.replaceState({},"",t.toString())}},[]);return(0,r.jsx)(z.Provider,{value:{input:c,setInput:d,uploadedFiles:h,setUploadedFiles:f,addUploadedFile:ey,removeUploadedFile:ev,updateUploadedFile:eb,getTotalTokens:eg,isUploadingFiles:em,chatMode:p,setChatMode:g,chatTitle:m,setChatTitle:y,currentChatId:v,setCurrentChatId:b,chats:V,setChats:_,isSwitchingChats:w,setIsSwitchingChats:x,sidebarOpen:S,setSidebarOpen:k,sidebarContent:C,setSidebarContent:E,chatSidebarOpen:R,setChatSidebarOpen:T,todos:A,setTodos:O,mergeTodos:j,replaceAssistantTodos:N,isTodoPanelExpanded:M,setIsTodoPanelExpanded:P,subscription:F,isCheckingProPlan:H,clearInput:()=>{d("")},clearUploadedFiles:()=>{f([])},openSidebar:e=>{E(e),k(!0)},updateSidebarContent:e=>{E(t=>t?{...t,...e}:t)},closeSidebar:()=>{k(!1),E(null)},toggleChatSidebar:()=>{T(e=>!e)},initializeChat:eC,initializeNewChat:eE,activateChat:eT,temporaryChatsEnabled:ei,setTemporaryChatsEnabled:eA,teamPricingDialogOpen:eo,setTeamPricingDialogOpen:ea,teamWelcomeDialogOpen:el,setTeamWelcomeDialogOpen:eO,migrateFromPentestgptDialogOpen:ec,setMigrateFromPentestgptDialogOpen:eM,setChatReset:eR,hasUserDismissedRateLimitWarning:K,setHasUserDismissedRateLimitWarning:X,messageQueue:G,queueMessage:ew,removeQueuedMessage:ex,clearQueue:eS,dequeueNext:ek,queueBehavior:ee,setQueueBehavior:et,sandboxPreference:er,setSandboxPreference:en},children:t})},"useGlobalState",0,()=>{let e=(0,n.useContext)(z);if(void 0===e)throw Error("useGlobalState must be used within a GlobalStateProvider");return e}],192512)}]);